"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[490],{590:(t,e,i)=>{i.d(e,{F:()=>u});var s=i(9384),h=i(6120),n=i(4532),r=i(8172),l=i(6324),o=i(1439),a=i(4669);class c extends a.N{constructor(){super(...arguments),this.fn=new Map,this.tn=!1}onEnable(){super.onEnable(),this.tn=!0}onDisable(){super.onDisable(),this.tn=!1}drawTile(t,e,i,s){super.drawTile(t,e,i,s);const h=Math.ceil(t-this.columnCount/2),n=Math.ceil(this.rowCount-e-this.rowCount/2)-1;this.fn.set(`${h}_${n}`,!0)}drawTileFromTwoDimensionalArray(t,e,i){super.drawTileFromTwoDimensionalArray(t,e,i);for(let s=0;s<t.length;s++)for(let h=0;h<t[s].length;h++)if(null!==t[s][h]){const t=Math.ceil(this.transform.localPosition.x/this.gridCellWidth+(h+e)-this.columnCount/2),n=Math.ceil(this.transform.localPosition.y/this.gridCellHeight+(this.rowCount-(s+i))-this.rowCount/2)-1;this.fn.set(`${t}_${n}`,!0)}}clearTile(t,e){super.clearTile(t,e);const i=Math.ceil(t-this.columnCount/2),s=Math.ceil(this.rowCount-e-this.rowCount/2)-1;this.fn.delete(`${i}_${s}`)}addCollider(t,e){const i=Math.ceil(t-this.columnCount/2),s=Math.ceil(this.rowCount-e-this.rowCount/2)-1;this.fn.set(`${i}_${s}`,!0)}checkCollision(t,e,i,s){if(!this.tn)return!1;const h=this.transform.position;t-=h.x,e-=h.y,this.columnCount%2==0&&(t-=this.gridCellWidth),this.rowCount%2==0&&(e-=this.gridCellHeight),this.rowCount%2==0&&(e+=this.gridCellHeight/2),this.columnCount%2==0&&(t+=this.gridCellWidth/2);const n=Math.floor(t/this.gridCellWidth),r=Math.floor((t+i)/this.gridCellWidth),l=Math.floor(e/this.gridCellHeight),o=Math.floor((e+s)/this.gridCellHeight);for(let a=l;a<=o;a++)for(let t=n;t<=r;t++)if(!0===this.fn.get(`${t}_${a}`))return!0;return!1}}class u extends r.w{constructor(){super(...arguments),this.Fr=new Map,this.Xr=new Map,this.Yr=16,this.Kr=1,this.Nr=1,this.Br=16,this.Gr=16,this.Jr=1.001,this.Qr=null,this.Zr=!0,this.tn=!1,this.sn=.1,this.en=l.r.Pixelated,this.hn=()=>{this.Fr.forEach(((t,e)=>{t.filter.copy(this.aa)}))},this.aa=new o.c(this.hn),this.Sr=[],this.zr=!1}start(){this.zr=!0;const t=this.Sr;for(let e=0;e<t.length;++e)t[e]();t.length=0}onEnable(){this.tn=!0}onDisable(){this.tn=!1}rn(){this.Fr.forEach(((t,e)=>{const i=this.nn(e)*this.Yr*this.Kr,s=this.on(e)*this.Yr*this.Nr;t.gameObject.transform.localPosition.set(i,s,0)}))}nn(t){return parseInt(t.substring(0,t.indexOf("_")))}on(t){return parseInt(t.substring(t.indexOf("_")+1))}ln(t,e){return`${t}_${e}`}cn(t,e,i,s){const n=i-t*this.Yr+this.Yr/2,r=s-e*this.Yr+this.Yr/2;return new h.F(n,r)}an(t,e){const i=this.ln(t,e);let h=this.Fr.get(i);if(void 0===h){const r=new s.s;this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject(`css_tilemap_renderer_${t}_${e}`,new n.P(t*this.Yr*this.Kr,e*this.Yr*this.Nr,0),void 0,(new n.P).setScalar(this.Jr)).withComponent(c,(t=>{this.Qr&&(t.imageSources=this.Qr),t.gridCellWidth=this.Kr,t.gridCellHeight=this.Nr,t.tileResolutionX=this.Br,t.tileResolutionY=this.Gr,t.rowCount=this.Yr,t.columnCount=this.Yr,t.pointerEvents=this.Zr,t.viewScale=this.sn,t.filter.copy(this.aa)})).getComponent(c,r)),h=r.ref,this.Fr.set(i,h)}return h}un(t,e){const i=this.ln(t,e),s=this.Fr.get(i);return void 0===s?null:s}drawTile(t,e,i,s){if(!this.zr)return void this.Sr.push((()=>{this.drawTile(t,e,i,s)}));const h=Math.floor((t+this.Yr/2)/this.Yr),n=Math.floor((e+this.Yr/2)/this.Yr),r=this.an(h,n),l=this.cn(h,n,t,e),o=this.chunkSize%2==0?0:-.5,a=this.chunkSize%2==0?0:.5,c=l.x+o,u=this.Yr-l.y-1+a;r.drawTile(c,u,i,s);const d=this.ln(h,n),m=this.Xr.get(d);void 0===m?this.Xr.set(d,new Set([`${c}_${u}`])):m.add(`${c}_${u}`)}drawTileFromTwoDimensionalArray(t,e,i){if(this.zr)for(let s=0;s<t.length;s++)for(let h=0;h<t[s].length;h++)null!==t[s][h]&&this.drawTile(h+e,t.length-s+i-1,t[s][h].i,t[s][h].a);else this.Sr.push((()=>{this.drawTileFromTwoDimensionalArray(t,e,i)}))}clearTile(t,e){if(!this.zr)return void this.Sr.push((()=>{this.clearTile(t,e)}));const i=Math.floor((t+this.Yr/2)/this.Yr),s=Math.floor((e+this.Yr/2)/this.Yr),h=this.un(i,s);if(null===h)return;const n=this.cn(i,s,t,e),r=this.chunkSize%2==0?0:-.5,l=this.chunkSize%2==0?0:.5;h.clearTile(n.x+r,this.Yr-n.y-1+l)}addCollider(t,e){if(!this.zr)return void this.Sr.push((()=>{this.addCollider(t,e)}));const i=Math.floor((t+this.Yr/2)/this.Yr),s=Math.floor((e+this.Yr/2)/this.Yr),h=this.an(i,s),n=this.cn(i,s,t,e),r=this.chunkSize%2==0?0:-.5,l=this.chunkSize%2==0?0:.5;h.addCollider(n.x+r,this.Yr-n.y-1+l)}checkCollision(t,e,i,s){if(!this.tn)return!1;const h=this.transform.position,n=Math.floor(((t-h.x)/this.Kr+this.Yr/2)/this.Yr),r=Math.floor(((e-h.y)/this.Nr+this.Yr/2)/this.Yr),l=this.ln(n,r),o=this.Fr.get(l);return void 0!==o&&o.checkCollision(t,e,i,s)}get chunkSize(){return this.Yr}set chunkSize(t){this.Yr=t,this.rn(),this.Fr.forEach(((t,e)=>{t.rowCount=this.Yr,t.columnCount=this.Yr}))}set imageSources(t){this.zr?this.Qr=t:this.Sr.push((()=>{this.imageSources=t}))}get pointerEvents(){return this.Zr}set pointerEvents(t){this.Zr=t,this.Fr.forEach(((e,i)=>{e.pointerEvents=t}))}get gridCellWidth(){return this.Kr}set gridCellWidth(t){this.Kr!==t&&(this.Kr=t,this.rn(),this.Fr.forEach(((t,e)=>{t.gridCellWidth=this.Kr})))}get gridCellHeight(){return this.Nr}set gridCellHeight(t){this.Nr!==t&&(this.Nr=t,this.rn(),this.Fr.forEach(((t,e)=>{t.gridCellHeight=this.Nr})))}get tileResolutionX(){return this.Br}set tileResolutionX(t){this.Br!==t&&(this.Br=t,this.Fr.forEach(((t,e)=>{t.tileResolutionX=this.Br})))}get tileResolutionY(){return this.Gr}set tileResolutionY(t){this.Gr!==t&&(this.Gr=t,this.Fr.forEach(((t,e)=>{t.tileResolutionY=this.Gr})))}get tilemapScale(){return this.Jr}set tilemapScale(t){this.Jr!==t&&(this.Jr=t,this.Fr.forEach(((t,e)=>{t.gameObject.transform.localScale.setScalar(this.Jr)})))}get gridCenter(){const t=this.transform.position,e=this.Yr%2==1?0:this.Kr/2,i=this.Yr%2==1?0:this.Nr/2;return new h.F(t.x+e,t.y+i)}get gridCenterX(){const t=this.transform.position,e=this.Yr%2==1?0:this.Kr/2;return t.x+e}get gridCenterY(){const t=this.transform.position,e=this.Yr%2==1?0:this.Nr/2;return t.y+e}get viewScale(){return this.sn}set viewScale(t){this.sn=t,this.Fr.forEach(((t,e)=>{t.viewScale=this.sn}))}get filter(){return this.aa}get imageRenderingMode(){return this.en}set imageRenderingMode(t){this.en=t,this.Fr.forEach(((e,i)=>{e.imageRenderingMode=t}))}}},5355:(t,e,i)=>{i.d(e,{y:()=>o});var s=i(4532),h=i(8172),n=i(9384),r=i(2684),l=i(2138);class o extends h.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[r.V],this.Nn=null,this.zn=null,this.Th=1,this.Ph=1,this.kn=18,this.Bn=10,this.qn=.2,this.An=0,this.Jn=new s.P(NaN,NaN,NaN)}awake(){const t=new n.s;this.zn=this.engine.scene.addChildFromBuilder(this.engine.instantiater.buildGameObject("grid-renderer",void 0,void 0,new s.P(this.qn,this.qn,this.qn)).active(!1).withComponent(l.w,(t=>{const e=document.createElement("div");e.style.backgroundImage="                        repeating-linear-gradient(#999 0 1px, transparent 1px 100%),                        repeating-linear-gradient(90deg, #999 0 1px, transparent 1px 100%)",e.style.backgroundSize=this.Th/this.qn/.1+"px "+this.Ph/this.qn/.1+"px",t.elementWidth=this.kn/this.qn,t.elementHeight=this.Bn/this.qn,t.pointerEvents=!1,t.element=e,t.viewScale=.1})).getComponent(l.w,t)),this.Nn=t.ref}onEnable(){this.zn.exists&&(this.zn.activeSelf=!0)}onDisable(){this.zn.exists&&(this.zn.activeSelf=!1)}update(){const t=this.transform.position,e=1/this.qn/.1,i=this.kn*e/2,s=this.Bn*e/2,h=this.Th*e,n=this.Ph*e,r=i%h,l=s%n;if(!t.equals(this.Jn)){const i=this.zn.transform.position;i.copy(t),i.z+=this.An,this.Nn.element.style.backgroundPosition=-t.x*e+r+h/2-.5+"px "+(t.y*e+l+n/2-.5)+"px"}}onDestroy(){var t;null===(t=this.zn)||void 0===t||t.destroy()}Qn(){const t=this.Nn;t&&(t.element.style.backgroundSize=this.Th/this.qn/.1+"px "+this.Ph/this.qn/.1+"px")}get gridCellWidth(){return this.Th}set gridCellWidth(t){this.Th=t,this.Qn()}get gridCellHeight(){return this.Ph}set gridCellHeight(t){this.Ph=t,this.Qn()}get renderWidth(){return this.kn}set renderWidth(t){this.kn=t,this.Nn&&(this.Nn.elementWidth=this.kn/this.qn)}get renderHeight(){return this.Bn}set renderHeight(t){this.Bn=t,this.Nn&&(this.Nn.elementHeight=this.Bn/this.qn)}get lineWidth(){return.1*this.qn}set lineWidth(t){this.qn=t/.1;const e=this.Nn;e&&(this.Qn(),e.elementWidth=this.kn/this.qn,e.elementHeight=this.Bn/this.qn,e.gameObject.transform.localScale.setScalar(this.qn))}get zOffset(){return this.An}set zOffset(t){this.An=t}}},2138:(t,e,i)=>{i.d(e,{w:()=>n});var s=i(9387),h=i(9429);class n extends h.Y{constructor(){super(...arguments),this.tu=1,this.su=1,this.iu=!1,this.Za=null}renderInitialize(){var t;null===(t=this.Za)||void 0===t||t.call(this),this.htmlElement||(this.element=null)}updateCenterOffset(t){if(!this.css3DObject)return;let e,i;if(this.iu)if(this.css3DObject.element.parentElement){const t=this.css3DObject.element.style.display;this.css3DObject.element.style.display="",e=this.css3DObject.element.offsetWidth*this.viewScale,i=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=t}else{const t=this.css3DObject.element.style.display;this.css3DObject.element.style.display="";const s=this.css3DObject.element.style.transform;this.css3DObject.element.style.transform="translateX(1000000px)",document.body.appendChild(this.css3DObject.element),e=this.css3DObject.element.offsetWidth*this.viewScale,i=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=t,this.css3DObject.element.style.transform=s,document.body.removeChild(this.css3DObject.element)}else e=this.tu,i=this.su;this.css3DObject.position.set(e*this.centerOffset.x,i*this.centerOffset.y,0),t&&(s.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}updateViewScale(t){if(!this.css3DObject)return;const e=this.viewScale;this.iu?(this.css3DObject.scale.set(e,e,e),this.updateCenterOffset(!1)):(this.css3DObject.element.style.width=this.tu/this.viewScale+"px",this.css3DObject.element.style.height=this.su/this.viewScale+"px",this.css3DObject.scale.set(e,e,e)),t&&(s.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}get element(){return this.htmlElement}set element(t){const e=this.htmlElement=null!=t?t:document.createElement("div");this.readyToDraw?this.hu(e):this.Za=()=>this.hu(e)}hu(t){this.iu?(t.style.width="auto",t.style.height="auto"):(t.style.width=this.tu/this.viewScale+"px",t.style.height=this.su/this.viewScale+"px");const e=this.initializeBaseComponents(!0);s.w.updateRawObject3DWorldMatrixRecursively(e),this.transform.enqueueRenderAttachedObject3D(e)}get elementWidth(){if(this.iu){if(this.htmlElement){const t=this.htmlElement.style.display;this.htmlElement.style.display="";const e=this.htmlElement.offsetWidth*this.viewScale;return this.htmlElement.style.display=t,e}return 0}return this.tu}set elementWidth(t){this.iu||(this.tu=t,this.htmlElement&&(this.htmlElement.style.width=t/this.viewScale+"px"),this.updateCenterOffset(!0))}get elementHeight(){if(this.iu){if(this.htmlElement){const t=this.htmlElement.style.display;this.htmlElement.style.display="";const e=this.htmlElement.offsetHeight*this.viewScale;return this.htmlElement.style.display=t,e}return 0}return this.su}set elementHeight(t){this.iu||(this.su=t,this.htmlElement&&(this.htmlElement.style.height=t/this.viewScale+"px"),this.updateCenterOffset(!0))}get autoSize(){return this.iu}set autoSize(t){this.iu=t,this.htmlElement&&(t?(this.htmlElement.style.width="auto",this.htmlElement.style.height="auto"):(this.htmlElement.style.width=this.tu/this.viewScale+"px",this.htmlElement.style.height=this.su/this.viewScale+"px"))}}}}]);