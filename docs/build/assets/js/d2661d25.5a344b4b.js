"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[969],{7947:(t,e,i)=>{i.d(e,{z:()=>g});var n=i(1539),s=i(9384),o=i(1492),r=i(8095),h=i(6896),a=i(6259),l=i(3276),d=i(957);const m=i.p+"assets/images/char_spritesheet-6b6a6acd99180f91c1aad1383dddc3cd.png";var c=i(8172),u=i(1370);class p extends c.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[u.T],this._collideSize=.5,this._tileWidth=1,this._tileHeight=1,this._gridEventMaps=[],this._directable=null,this.onKeyDown=t=>{if("e"!==t.key.toLowerCase())return;const e=this.gameObject.transform.position;let i,n;switch(this._directable.direction){case u.N.Up:i=0,n=this._tileHeight;break;case u.N.Down:i=0,n=-this._tileHeight;break;case u.N.Left:i=-this._tileWidth,n=0;break;case u.N.Right:i=this._tileWidth,n=0}for(let s=0;s<this._gridEventMaps.length;s++){this._gridEventMaps[s].tryInvokeEvent(e.x+i,e.y+n,this._collideSize,this._collideSize,this.gameObject)}}}awake(){this._directable=this.gameObject.getComponent(u.T)}onEnable(){this.engine.input.onKeyDown.addListener(this.onKeyDown)}onDisable(){this.engine.input.onKeyDown.removeListener(this.onKeyDown)}addGridEventMap(t){this._gridEventMaps.push(t)}}class g extends n.W{constructor(){super(...arguments),this._collideMaps=[],this._gridPointer=new s.s,this._gridPosition=new s.s,this._gridEventMap=new s.s}withCollideMap(t){return this._collideMaps.push(t),this}withGridPointer(t){return this._gridPointer=t,this}withGridPosition(t){return this._gridPosition=t,this}withGridEventMap(t){return this._gridEventMap=t,this}make(){return this.gameObjectBuilder.withComponent(o.$,(t=>{t.asyncSetImageFromPath(m,26,23),t.imageWidth=1,t.imageHeight=1,t.viewScale=1,t.filter.brightness=1.2})).withComponent(r.h,(t=>{t.addAnimation("down_walk",[27,28,29,30,31,32]),t.addAnimation("left_walk",[53,54,55,56,57,58]),t.addAnimation("right_walk",[79,80,81,82,83,84]),t.addAnimation("up_walk",[105,106,107,108,109,110]),t.addAnimation("down_idle",[34,35,36,37,38,39]),t.addAnimation("left_idle",[60,61,62,63,64,65]),t.addAnimation("right_idle",[86,87,88,89,90,91]),t.addAnimation("up_idle",[112,113,114,115,116,117]),t.addAnimation("down_hit",[41,42,43]),t.addAnimation("left_hit",[67,68,69]),t.addAnimation("right_hit",[93,94,95]),t.addAnimation("up_hit",[119,120,121]),t.addAnimation("down_push",[45,46,47,48,49,50]),t.addAnimation("left_push",[71,72,73,74,75,76]),t.addAnimation("right_push",[97,98,99,100,101,102]),t.addAnimation("up_push",[123,124,125,126,127,128]),t.addAnimation("down_climb",[157,158,159,160,161,162]),t.addAnimation("up_climb",[183,184,185,186,187,188]),t.addAnimation("down_shield_hit",[168,169,170,171,172]),t.addAnimation("left_shield_hit",[194,195,196,197,198]),t.addAnimation("right_shield_hit",[220,221,222,223,224]),t.addAnimation("up_shield_hit",[246,247,248,249,250]),t.addAnimation("down_shield",[174]),t.addAnimation("left_shield",[200]),t.addAnimation("right_shield",[226]),t.addAnimation("up_shield",[252]),t.addAnimation("death_all_air",[235,236,237,238,239,240,241,242,243,244]),t.addAnimation("falling_all_air",[287,288,289,290,291,292]),t.frameDuration=.1,t.playAnimation("down_idle")})).withComponent(h.j,(t=>{t.speed=4;for(const e of this._collideMaps)e.ref&&t.addCollideMap(e.ref);t.gridPointer=this._gridPointer.ref,this._gridPosition.ref&&(t.initPosition=this._gridPosition.ref)})).withComponent(a.q).withComponent(l.V,(t=>{this._gridEventMap.ref&&t.addGridEventMap(this._gridEventMap.ref)})).withComponent(p,(t=>{this._gridEventMap.ref&&t.addGridEventMap(this._gridEventMap.ref)})).withComponent(d.$,(t=>{t.runOnce=!1,t.offset=.5}))}}},6327:(t,e,i)=>{i.d(e,{l:()=>l});var n=i(1539),s=i(6987),o=i(70),r=i(9067),h=i(4669),a=i(9484);class l extends n.W{constructor(){super(...arguments),this._planeSize=null}withPlaneSize(t){return this._planeSize=t,this}make(){return this.gameObjectBuilder.withComponent(s.N,(t=>{t.offset=-100})).withComponent(o.n,(t=>{t.chunkSize=15,t.filter.brightness=1.5,t.tileResolutionX=16,t.tileResolutionY=16,r.E.loadImageFromPath(a.Z).then((e=>{var i,n;if(!t.exists)return;t.imageSources=[new h.I(e,18,13)];const s={i:0,a:24},o=null!=(i=null==(n=this._planeSize)?void 0:n.ref)?i:51,r=[];for(let t=0;t<o;t++){r[t]=[];for(let e=0;e<o;e++)r[t][e]=s}const a=Math.floor(o/2);t.drawTileFromTwoDimensionalArray(r,-a,-a)}))}))}}},2440:(t,e,i)=>{i.d(e,{Y:()=>c});var n=i(1539),s=i(9384),o=i(6987),r=i(590),h=i(9067),a=i(4669),l=i(4587),d=i(70),m=i(9484);class c extends n.W{constructor(){super(...arguments),this._collideTilemap=new s.s}getCollideTilemap(t){return this._collideTilemap=t,this}make(){return this.gameObjectBuilder.withComponent(o.N,(t=>{t.offset=-98})).withComponent(r.F,(t=>{t.chunkSize=15,t.filter.brightness=1.5,t.tileResolutionX=16,t.tileResolutionY=16,h.E.loadImageFromPath(m.Z).then((e=>{if(!t.exists)return;function i(t){return{i:0,a:t}}t.imageSources=[new a.I(e,18,13)];const n={o:()=>i(93),O:()=>i(94),"#":()=>i(61),"@":()=>i(75),$:()=>i(76),"*":()=>i(58),"^":()=>i(59)," ":()=>null};t.drawTileFromTwoDimensionalArray(l.d.map(["              ","   $          ","    #         ","              ","              "],n),-3,4),t.drawTileFromTwoDimensionalArray(l.d.map(["             ","          o  ","         @   ","     #       ","             ","             ","O            "],n),-7,-8)}))})).withComponent(d.n,(t=>{t.chunkSize=15,t.filter.brightness=1.5,t.tileResolutionX=16,t.tileResolutionY=16,h.E.loadImageFromPath(m.Z).then((e=>{if(!t.exists)return;function i(t){return{i:0,a:t}}t.imageSources=[new a.I(e,18,13)];const n={"\u3161":()=>i(47),"\u3163":()=>i(46),"\u3155":()=>i(11),"\u3151":()=>i(29),"\u314f":()=>i(44),"\u3153":()=>i(45),"\u3157":()=>i(62),"\u315c":()=>i(63),"\u3131":()=>i(8),"\u3134":()=>i(26),"\u3132":()=>i(9),"\u3139":()=>i(27),"\u315b":()=>i(28),"\u3160":()=>i(10),"\u3147":()=>null};t.drawTileFromTwoDimensionalArray(l.d.map(["\u3160","\u3134\u3131","\u3147\u314f\u3161\u3161\u3161\u3161\u3161\u3155","\u3147\u315b"],n),-3,4),t.drawTileFromTwoDimensionalArray(l.d.map(["\u3147\u3147\u3147\u3147\u3147\u3147\u3160","\u3147\u3147\u3147\u3147\u3147\u3147\u3163","\u3151\u3161\u3161\u3161\u3161\u3161\u3157\u3161\u315c\u3161\u3161\u3161\u3161\u3161\u3161\u3155","\u3147\u3147\u3147\u3147\u3147\u3147\u3147\u3147\u315b"],n),-8,-1),t.drawTileFromTwoDimensionalArray(l.d.map(["\u3147\u3147\u3147\u3147\u3147\u3160","\u3147\u3147\u3147\u3147\u3147\u3163","\u3147\u3147\u3147\u3147\u3147\u3163","\u3132\u3161\u3161\u3161\u3161\u3139","\u3163\u3147\u3147\u3147\u3147\u3147","\u315b\u3147\u3147\u3147\u3147\u3147"],n),-5,-8),t.drawTileFromTwoDimensionalArray(l.d.map(["\u3160","\u3163","\u3163","\u3163","\u3163","\u315b\u3147\u3147\u3147\u3147\u3147"],n),-5,-15);const s={"^":()=>i(56),"%":()=>i(57),"*":()=>i(72),"&":()=>i(73),"!":()=>i(90),"~":()=>i(91),o:()=>i(74),O:()=>i(92)," ":()=>null};t.drawTileFromTwoDimensionalArray(l.d.map(["     ^","","^ %  ~*"],s),3,4),t.drawTileFromTwoDimensionalArray(l.d.map(["O%    ^"," ^","","^  %"],s),1,-1),t.drawTileFromTwoDimensionalArray(l.d.map(["%     ^"," ","      *~","    % !~","     !**","o   !**~"],s),-2,-8)}))})).getComponent(r.F,this._collideTilemap)}}},1900:(t,e,i)=>{i.d(e,{P:()=>y});var n=i(1539),s=i(9384),o=i(6987),r=i(590),h=i(9067),a=i(4669),l=i(70),d=i(9484),m=i(6120);const c={i:0,a:4},u={i:0,a:5},p={i:0,a:7},g={i:0,a:22},w={i:0,a:25},C={i:0,a:40},f={i:0,a:41},b={i:0,a:43};class v{static make(t,e,i,n){const s=Array(e);for(let o=0;o<e;o++){s[o]=Array(t);for(let e=0;e<t;e++)s[o][e]=null}s[0][0]=c;for(let o=1;o<t-1;o++)s[0][o]=u;s[0][t-1]=p;for(let o=1;o<e-1;o++)s[o][0]=g,s[o][t-1]=w;s[e-1][0]=C;for(let o=1;o<t-1;o++)s[e-1][o]=f;return s[e-1][t-1]=b,null!==i&&(s[0][i]=null),null!==n&&(s[e-1][n]=null),s}static computeEntryPosition(t,e,i,n,s){return{top:null!==e?new m.F(n+e,s+t-1):null,bottom:null!==i?new m.F(n+i,s):null}}}class y extends n.W{constructor(){super(...arguments),this._collideTilemap=new s.s}getCollideTilemap(t){return this._collideTilemap=t,this}make(){return this.gameObjectBuilder.withComponent(o.N,(t=>{t.offset=-99})).withComponent(r.F,(t=>{t.chunkSize=15,t.filter.brightness=1.5,t.tileResolutionX=16,t.tileResolutionY=16,h.E.loadImageFromPath(d.Z).then((e=>{if(t.exists){t.imageSources=[new a.I(e,18,13)];for(const e of y._islandList)t.drawTileFromTwoDimensionalArray(v.make(e.width,e.height,e.topEntry,e.bottomEntry),e.x,e.y)}}))})).withComponent(l.n,(t=>{t.chunkSize=15,t.filter.brightness=1.5,t.tileResolutionX=16,t.tileResolutionY=16;h.E.loadImageFromPath(d.Z).then((e=>{if(t.exists){t.imageSources=[new a.I(e,18,13)];for(const e of y._islandList){const i=v.computeEntryPosition(e.height,e.topEntry,e.bottomEntry,e.x,e.y);i.top&&t.drawTile(i.top.x,i.top.y,0,6),i.bottom&&t.drawTile(i.bottom.x,i.bottom.y,0,42)}}}))})).getComponent(r.F,this._collideTilemap)}}y._islandList=[{width:16,height:6,topEntry:1,bottomEntry:2,x:-4,y:3},{width:15,height:8,topEntry:8,bottomEntry:3,x:-8,y:-9}]},1788:(t,e,i)=>{i.r(e),i.d(e,{assets:()=>tt,contentTitle:()=>J,default:()=>nt,frontMatter:()=>$,metadata:()=>Q,toc:()=>et});var n=i(7462),s=(i(7294),i(3905)),o=i(7346),r=i(8172),h=i(2182),a=i(3274),l=i(9384),d=i(4532),m=i(6120),c=i(6324);class u extends r.w{constructor(){super(...arguments),this.Er=new Map,this.Th=1,this.Ph=1,this.$r=!1,this.Rr=[],this.Sr=[],this.zr=!1}start(){this.zr=!0;const t=this.Sr;for(let e=0;e<t.length;++e)t[e]();t.length=0}addEvent(t,e,i){this.zr?(this.Er.set(`${t}_${e}`,i),this.$r&&this._r(t*this.gridCellWidth,e*this.gridCellHeight)):this.Sr.push((()=>{this.addEvent(t,e,i)}))}addEventsFromTwoDimensionalArray(t,e,i){if(this.zr)for(let n=0;n<t.length;n++)for(let s=0;s<t[n].length;s++)null!==t[n][s]&&this.addEvent(s+e,t.length-(n+i),t[n][s]);else this.Sr.push((()=>{this.addEventsFromTwoDimensionalArray(t,e,i)}))}Hr(){this.Er.forEach(((t,e)=>{const[i,n]=e.split("_").map(Number);this._r(i*this.gridCellWidth,n*this.gridCellHeight)}))}Wr(){const t=this.Rr;for(let e=0;e<t.length;++e)t[e].destroy();this.Rr.length=0}_r(t,e){const i={ref:null};this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("debug-image",new d.P(t,e,1e4)).withComponent(c._,(t=>{t.opacity=.5,t.imageWidth=this.gridCellWidth,t.imageHeight=this.gridCellHeight})).getGameObject(i)),this.Rr.push(i.ref)}tryInvokeEvent(t,e,i,n,s){const o=this.transform.position;t-=o.x,e-=o.y;const r=Math.floor(t/this.gridCellWidth),h=Math.floor((t+i)/this.gridCellWidth),a=Math.floor(e/this.gridCellHeight),l=Math.floor((e+n)/this.gridCellHeight);let d=!1;for(let m=a;m<=l;m++)for(let t=r;t<=h;t++)this.Er.has(`${t}_${m}`)&&(this.Er.get(`${t}_${m}`)(t,m,s),d=!0);return d}get gridCellWidth(){return this.Th}set gridCellWidth(t){this.Th=t}get gridCellHeight(){return this.Ph}set gridCellHeight(t){this.Ph=t}get showEvents(){return this.$r}set showEvents(t){this.$r=t,this.$r?this.Hr():this.Wr()}get gridCenter(){const t=this.transform.position;return new m.F(t.x,t.y)}get gridCenterX(){return this.transform.position.x}get gridCenterY(){return this.transform.position.y}}var p=i(5924),g=i(9387),w=i(9624);class C{constructor(t,e,i){this.gn=new m.F(t.x,t.y),this.xn=new m.F(e.x,e.y),this.Sn=i}get gridPosition(){return this.gn}get position(){return this.xn}get button(){return this.Sn}}class f extends r.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.Tn=null,this.Vn=null,this.Th=1,this.Ph=1,this.yh=new m.F,this.sn=.1,this.yn=64,this.Mn=64,this.Is=new p.n,this.Xs=new p.n,this.Ys=new p.n,this.zs=new p.n,this.Gs=new p.n,this.Zs=null,this.Js=!1,this.zr=!1,this._n=new d.P,this.Gn=t=>{const e=this.Wn(t.offsetX,t.offsetY,t.button);this.Is.invoke(e)},this.jn=t=>{const e=this.Wn(t.offsetX,t.offsetY,t.button);this.Xs.invoke(e)},this.Hn=t=>{const e=this.Wn(t.offsetX,t.offsetY,t.button);this.Ys.invoke(e)},this.Kn=t=>{const e=this.Wn(t.offsetX,t.offsetY,t.button);this.zs.invoke(e)},this.On=t=>{const e=this.Wn(t.offsetX,t.offsetY,t.button);this.Gs.invoke(e)},this.Fn=t=>{this.Zs=()=>{this.ye("mouseenter",t.touches[0]),this.ye("mousedown",t.touches[0])}},this.In=t=>{this.Js&&(this.Js=!1,this.ye("mouseup",t.changedTouches[0]),this.ye("mouseleave",t.changedTouches[0]))},this.Ln=t=>{this.Zs&&(this.Zs(),this.Zs=null),this.ye("mousemove",t.touches[0]),this.Js=!0},this.Un=t=>{this.Js&&(this.Js=!1,this.ye("mouseleave",t.changedTouches[0]))}}start(){this.Vn=document.createElement("div"),this.Tn=new w.cp(this.Vn),this.Tn.scale.setScalar(this.sn),this.Vn.style.width=this.yn/this.sn+"px",this.Vn.style.height=this.Mn/this.sn+"px",this.Vn.addEventListener("mousedown",this.Gn),this.Vn.addEventListener("mouseup",this.jn),this.Vn.addEventListener("mouseenter",this.Hn),this.Vn.addEventListener("mouseleave",this.Kn),this.Vn.addEventListener("mousemove",this.On),this.Vn.addEventListener("touchstart",this.Fn),this.Vn.addEventListener("touchend",this.In),this.Vn.addEventListener("touchmove",this.Ln),this.Vn.addEventListener("touchcancel",this.Un),this.transform.unsafeGetObject3D().add(this.Tn),g.w.updateRawObject3DWorldMatrixRecursively(this.Tn),this.transform.enqueueRenderAttachedObject3D(this.Tn),this.zr=!0}update(){let t;this._n.copy(this.engine.cameraContainer.camera.transform.position),t=this.transform.parent?this.transform.parent.inverseTransformPoint(this._n):this._n,this.Tn.position.x=t.x,this.Tn.position.y=t.y,g.w.updateRawObject3DWorldMatrixRecursively(this.Tn),this.transform.enqueueRenderAttachedObject3D(this.Tn)}onDestroy(){this.zr&&(this.Vn&&(this.Vn.removeEventListener("mousedown",this.Gn),this.Vn.removeEventListener("mouseup",this.jn),this.Vn.removeEventListener("mouseenter",this.Hn),this.Vn.removeEventListener("mouseleave",this.Kn),this.Vn.removeEventListener("mousemove",this.On),this.Vn.removeEventListener("touchstart",this.Fn),this.Vn.removeEventListener("touchend",this.In),this.Vn.removeEventListener("touchmove",this.Ln),this.Vn.removeEventListener("touchcancel",this.Un)),this.Tn&&this.transform.unsafeGetObject3D().remove(this.Tn))}onWorldMatrixUpdated(){this.Tn&&(g.w.updateRawObject3DWorldMatrixRecursively(this.Tn),this.transform.enqueueRenderAttachedObject3D(this.Tn))}Wn(t,e,i){t*=this.sn,e*=this.sn;const n=this.transform.position,s=this.Tn.position.x+n.x-this.yn/2+t-this.yh.x,o=this.Tn.position.y+n.y-this.Mn/2+(this.Mn-e)-this.yh.y,r=Math.floor((s+.5*this.Th)/this.Th),h=Math.floor((o+.5*this.Ph)/this.Ph);return new C(new m.F(r,h),new m.F(s,o),i)}ye(t,e){const i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,detail:1,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.target.dispatchEvent(i)}get onPointerDown(){return this.Is}get onPointerUp(){return this.Xs}get onPointerEnter(){return this.Ys}get onPointerLeave(){return this.zs}get onPointerMove(){return this.Gs}get gridCenter(){return this.yh}set gridCenter(t){this.yh.copy(t)}get gridCellWidth(){return this.Th}set gridCellWidth(t){this.Th=t}get gridCellHeight(){return this.Ph}set gridCellHeight(t){this.Ph=t}setGridInfoFromCollideMap(t){this.Th=t.gridCellWidth,this.Ph=t.gridCellHeight,this.yh.set(t.gridCenterX,t.gridCenterY)}get inputWidth(){return this.yn}set inputWidth(t){this.yn=t,this.Vn&&(this.Vn.style.width=this.yn/this.sn+"px")}get inputHeight(){return this.Mn}set inputHeight(t){this.Mn=t,this.Vn&&(this.Vn.style.height=this.Mn/this.sn+"px")}get viewScale(){return this.sn}set viewScale(t){this.sn=t,this.Vn&&(this.Vn.style.width=this.yn/this.sn+"px",this.Vn.style.height=this.Mn/this.sn+"px"),this.Tn&&(this.Tn.scale.setScalar(this.sn),g.w.updateRawObject3DWorldMatrixRecursively(this.Tn),this.transform.enqueueRenderAttachedObject3D(this.Tn))}}var b=i(2138);class v extends r.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[f],this.mn=null,this.pn=0,this.dn=null,this.vn=null,this.Is=new p.n,this.Xs=new p.n,this.Gs=new p.n,this.Pn=!1,this.zr=!1,this.Cn=t=>{this.dn.activeSelf=!0,this.wn(t)},this.En=t=>{this.Pn&&this.Dn(t),this.dn.activeSelf=!1},this.Rn=t=>{var e;this.Pn=!0,this.bn(t);const i=null===(e=this.vn)||void 0===e?void 0:e.element;i&&(i.style.backgroundColor="#DDDDDD"),this.Is.invoke(t)},this.Dn=t=>{var e;this.Pn=!1,this.bn(t);const i=null===(e=this.vn)||void 0===e?void 0:e.element;i&&(i.style.backgroundColor="white"),this.Xs.invoke(t)},this.wn=t=>{this.bn(t),this.Gs.invoke(t)}}start(){this.mn=this.gameObject.getComponent(f),this.mn.onPointerEnter.addListener(this.Cn),this.mn.onPointerLeave.addListener(this.En),this.mn.onPointerDown.addListener(this.Rn),this.mn.onPointerUp.addListener(this.Dn),this.mn.onPointerMove.addListener(this.wn);const t=new l.s,e=new l.s;this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("pointer",new d.P(0,0,this.pn)).active(!1).withComponent(b.w,(t=>{t.pointerEvents=!1;const e=document.createElement("div");e.style.backgroundColor="white",e.style.opacity="0.3",t.element=e})).getComponent(b.w,e).getGameObject(t)),this.dn=t.ref,this.vn=e.ref,this.zr=!0}onDestroy(){this.zr&&this.mn&&(this.mn.onPointerEnter.removeListener(this.Cn),this.mn.onPointerLeave.removeListener(this.En),this.mn.onPointerDown.removeListener(this.Rn),this.mn.onPointerUp.removeListener(this.Dn),this.mn.onPointerMove.removeListener(this.wn))}bn(t){const e=this.mn.gridCellWidth,i=this.mn.gridCellHeight,n=this.mn.gridCenter,s=t.gridPosition.x*e+n.x,o=t.gridPosition.y*i+n.y;this.dn.transform.localPosition.set(s,o,this.pn)}get onPointerDown(){return this.Is}get onPointerUp(){return this.Xs}get onPointerMove(){return this.Gs}get pointerZoffset(){return this.pn}set pointerZoffset(t){this.pn=t}}var y=i(6987),_=i(1539),k=i(2684),P=i(5355),E=i(5365),M=i(9542);class x extends r.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[b.w],this._dialogUi=null,this.camera=null,this._transitionCoroutine=null,this._textAnimationCoroutine=null,this._isShowing=!1,this._maxWidth=10,this._initializeFunction=null,this.onScreenResize=()=>{if(!this._dialogUi)return;const t=this.engine.screen,e=t.width/t.height,i=this.camera.viewSize;this._dialogUi.elementWidth=Math.min(this._maxWidth,2*i*e-1)},this._lastViewSize=0}awake(){var t;if(this._dialogUi=this.gameObject.getComponent(b.w),null===this.camera)throw new Error("DialogController requires a camera component");this._dialogUi.htmlElementEventHandler.onmousedown=()=>{this.hideUi()},this.onScreenResize(),null==(t=this._initializeFunction)||t.call(this)}onEnable(){this.engine.screen.onResize.addListener(this.onScreenResize)}onDisable(){this.engine.screen.onResize.removeListener(this.onScreenResize)}update(){const t=this.camera.viewSize;t!==this._lastViewSize&&(this.onScreenResize(),this._transitionCoroutine&&this.stopCoroutine(this._transitionCoroutine),this.transform.localPosition.y=this._isShowing?1.5-t:-t-1.5,this._lastViewSize=t)}showMessage(t){this._dialogUi?(this.showUi(),this._textAnimationCoroutine&&this.stopCoroutine(this._textAnimationCoroutine),this._textAnimationCoroutine=this.startCoroutine(this.showTextAnimation(t,.7))):this._initializeFunction=()=>this.showMessage(t)}*showTextAnimation(t,e){let i=0;for(;i<e;)this._dialogUi.element.firstChild.textContent=t.substring(0,Math.floor(i/e*t.length)),yield null,i+=this.engine.time.deltaTime;this._dialogUi.element.firstChild.textContent=t}showUi(){this._isShowing||(this._isShowing=!0,this._transitionCoroutine&&this.stopCoroutine(this._transitionCoroutine),this._transitionCoroutine=this.startCoroutine(this.moveUiAnim(1.5-this.camera.viewSize)))}hideUi(){this._isShowing&&(this._isShowing=!1,this._transitionCoroutine&&this.stopCoroutine(this._transitionCoroutine),this._transitionCoroutine=this.startCoroutine(this.moveUiAnim(-this.camera.viewSize-1.5)))}*moveUiAnim(t){const e=this.transform.localPosition;for(;Math.abs(e.y-t)>.01;){const i=this.engine.time.deltaTime;e.y=M.u1(e.y,t,8,i),yield null}e.y=t}}class T extends _.W{constructor(){super(...arguments),this._target=new l.s,this._dialogController=new l.s}withTarget(t){return this._target=t,this}getDialogController(t){return this._dialogController=t,this}make(){const t=new l.s;return this.gameObjectBuilder.withComponent(k.V,(t=>{t.cameraType=k.i.Orthographic})).withComponent(h.Y,(t=>{t.mouseMoveButton=0})).withComponent(P.y,(t=>{t.renderWidth=50,t.renderHeight=50,t.zOffset=-1,t.enabled=!1})).withComponent(E.K,(t=>{t.setTrackTarget(this._target.ref)})).getComponent(k.V,t).withChild(this.instantiater.buildGameObject("game-ui",new d.P(0,-7,2)).withComponent(b.w,(t=>{const e=document.createElement("div");e.style.border="2px solid black",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.style.fontFamily="'Press Start 2P', cursive",e.style.fontSize="3px",e.style.color="white",e.style.padding="3px",e.style.boxSizing="border-box",e.textContent="";const i=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.appendChild(i);const n=document.createElement("style");n.textContent="\n                        @keyframes blink {\n                            50% { opacity: 0; }\n                        }\n                    ",e.appendChild(n);const s=document.createElement("div");s.style.fontSize="4px",s.style.color="white",s.style.position="absolute",s.style.bottom="2px",s.style.right="3px",s.textContent="\u25c0",s.style.animation="blink 1s step-end infinite",e.appendChild(s),t.elementWidth=10,t.elementHeight=2.5,t.element=e})).withComponent(x,(e=>{e.camera=t.ref})).getComponent(x,this._dialogController))}}var j=i(7947),A=i(6327),z=i(9913),O=i(3361);class S extends _.W{constructor(){super(...arguments),this._collideMap=new l.s,this._objectCollideMap=new l.s}getCollideMap(t){return this._collideMap=t,this}getObjectCollideMap(t){return this._objectCollideMap=t,this}make(){return this.gameObjectBuilder.withComponent(z.r,(t=>{t.showCollider=!1;const e=13;for(let i=-13;i<=e;i++)t.addCollider(e,i),t.addCollider(i,e),t.addCollider(-13,i),t.addCollider(i,-13)})).withComponent(O.I,(t=>{t.showCollider=!1})).getComponent(z.r,this._collideMap).getComponent(O.I,this._objectCollideMap)}}var D=i(2440),W=i(1900),F=i(8095);var I=i(957),L=i(1492),R=i(1285);class N extends _.W{constructor(){super(...arguments),this._objectCollideMap=new l.s}withObjectCollideMap(t){return this._objectCollideMap=t,this}make(){return this.gameObjectBuilder.withComponent(I.$).withComponent(L.$,(t=>{t.viewScale=1,this.rendererInitializer(t)})).withComponent(R.u,(t=>{this._objectCollideMap.ref&&(t.gridObjectCollideMap=this._objectCollideMap.ref),this.colliderInitializer(t)}))}}class G extends N{rendererInitializer(t){t.asyncSetImageFromPath("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAQCAYAAACBSfjBAAACRklEQVRYhe2WwWoTURRAz0xSYiNCFyWrIBREHdAsfNUgQkLTbiwSP6C1Ej+hH+LeLgwUXdiVi+LOFFchmCkli44bJWp0MUixBtIUMo6rFyfJZDKZhKRY7yaPcM899933ZhL4H33jcCtrTxY8Y/Gv7CNwTGsAY/GOWuRwK2uPo8Yo/CRCdfvyLDUepBd5eKPswy/vOkAALZsayy36uvtkaEZ6tWwqsFeyQQ/Ab27fATqbABBC2EIIX4Xl5rVsivr3H/awfLc7CN9dI4hfXiIvPuwGP3r2jXL271oIYW9uPMC0YgC2ruuKl9yNX19r38RA/LT9/fieQkIIO3M5xKXZC9ROLeKREAD1kybzV26yUzjAqwEv/tf8Hcr7xcD8tP1uvOIE5frhtYsA1E4tAOKREPWTJoUvVlvU3cQk+GN1Br3anJrfjQ9LePHWXa5rGrGQycfSnrN2u/nNjfuYVowPhgGOq+zkAfTX21yNR9p80TjCVCPIx8CL9/KnUyto9wb76+VXrvz62uOB/mH7V5M5rT35Fy+fd0hlHKszJG4sYlqxjpxkTrP78UXjCL3aRK82MdUIy0urPTle/Kj+bn5uITOU32//SjKn2a1KFIBwokGrEuV2WuH35wjp1AoAtVqNncJBR45cA3Tz8tN5YuX9om9+2v5heLWUN5RwotEuFk40eP/OZm4hg2nFeLq9y6efsx1CmV/KG4ob36pEXU/MLz9t/zB8z6+RvJHLS6u83XvTM/FS3vD8C3DeeNdizveCMwbJzyP/B2dywkbQ/oNoAAAAAElFTkSuQmCC",5,1),t.imageWidth=1,t.imageHeight=1}colliderInitializer(t){t.addColliderFromTwoDimensionalArray([[1]],0,0)}make(){return super.make().withComponent(F.h,(t=>{t.addAnimation("anim",[0,1,2,3,4]),t.frameDuration=.1,t.playAnimation("anim")}))}}var V=i(9484);class B extends N{rendererInitializer(t){t.asyncSetImageFromPath(V.Z,3,2.6),t.imageIndex=2,t.imageWidth=6,t.imageHeight=5,t.centerOffset=new m.F(0,.45),t.filter.brightness=1.5}colliderInitializer(t){t.addColliderFromTwoDimensionalArray([[1,1,1,1],[1,1,1,1,1]],-2,1)}}class H extends N{rendererInitializer(t){t.enabled=!1}colliderInitializer(t){t.addColliderFromTwoDimensionalArray([[1,1,1,1,1],[1,1,1,1,1]],-2,1)}make(){return super.make().withComponent(b.w,(t=>{const e=document.createElement("img");e.src=V.Z,e.style.objectFit="none",e.style.imageRendering="pixelated",e.style.objectPosition="-144px -80px",t.element=e,t.viewScale=1/16,t.elementWidth=5,t.elementHeight=4,t.centerOffset=new m.F(0,.452),t.filter.brightness=1.5}))}}class U extends N{rendererInitializer(t){t.asyncSetImageFromPath(V.Z,9,13/3),t.imageIndex=28.5,t.imageWidth=2,t.imageHeight=3,t.centerOffset=new m.F(0,.3),t.filter.brightness=1.5}colliderInitializer(t){t.addColliderFromTwoDimensionalArray([[1]],0,1)}}class X extends N{rendererInitializer(t){t.asyncSetImageFromPath(V.Z,9,13/3),t.imageIndex=29.5,t.imageWidth=2,t.imageHeight=3,t.centerOffset=new m.F(0,.3),t.filter.brightness=1.5}colliderInitializer(t){t.addColliderFromTwoDimensionalArray([[1]],0,1)}}class Y extends _.W{constructor(){super(...arguments),this._objectCollideMap=new l.s}withObjectCollideMap(t){return this._objectCollideMap=t,this}make(){const t=this.instantiater;return this.gameObjectBuilder.withChild(t.buildPrefab("tree1",U,new d.P(0,2,0)).withObjectCollideMap(this._objectCollideMap).make()).withChild(t.buildPrefab("tree1",U,new d.P(-5,2,0)).withObjectCollideMap(this._objectCollideMap).make()).withChild(t.buildPrefab("tree1",U,new d.P(-7,3,0)).withObjectCollideMap(this._objectCollideMap).make()).withChild(t.buildPrefab("tree2",X,new d.P(2,-1,0)).withObjectCollideMap(this._objectCollideMap).make()).withChild(t.buildPrefab("tree2",X,new d.P(9,7,0)).withObjectCollideMap(this._objectCollideMap).make()).withChild(t.buildPrefab("tree2",X,new d.P(10,6,0)).withObjectCollideMap(this._objectCollideMap).make()).withChild(t.buildPrefab("house1",B,new d.P(5,6,0)).withObjectCollideMap(this._objectCollideMap).make()).withChild(t.buildPrefab("house2",H,new d.P(-5,-5,0)).withObjectCollideMap(this._objectCollideMap).make()).withChild(t.buildPrefab("campfire",G,new d.P(4,1,0)).withObjectCollideMap(this._objectCollideMap).make())}}class q extends r.w{constructor(){super(...arguments),this._linkElement=null,this._id="font-loader"}awake(){document.getElementById(this._id)||(this._linkElement=document.createElement("link"),this._linkElement.rel="stylesheet",this._linkElement.href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap",this._linkElement.id=this._id,document.head.appendChild(this._linkElement))}onDestroy(){this._linkElement&&document.head.removeChild(this._linkElement)}}class K extends a.A{run(){const t=this.instantiater,e=new l.s,i=new l.s,n=new l.s,s=new l.s,o=new l.s,r=new l.s,h=new l.s,a=new l.s;return this.sceneBuilder.withChild(t.buildGameObject("world").withChild(t.buildGameObject("tilemap").withChild(t.buildPrefab("background",A.l).make()).withChild(t.buildPrefab("islands",W.P).getCollideTilemap(s).make()).withChild(t.buildPrefab("detail",D.Y).getCollideTilemap(o).make())).withChild(t.buildPrefab("collision",S).getCollideMap(i).getObjectCollideMap(n).make()).withChild(t.buildGameObject("event").withComponent(u,(t=>{t.showEvents=!1,t.addEvent(0,-2,(()=>{a.ref&&a.ref.showMessage("Press E to interact with the object.")})),t.addEvent(-2,-5,(()=>{a.ref&&a.ref.showMessage("john's house")})),t.addEvent(-4,-4,(()=>{a.ref&&a.ref.showMessage("door is locked")})),t.addEvent(2,-4,(()=>{a.ref&&a.ref.showMessage("a stump")})),t.addEvent(4,1,(()=>{a.ref&&a.ref.showMessage("The campfire is warm")})),t.addEvent(1,6,(()=>{a.ref&&a.ref.showMessage("Lorem ipsum dolor sit amet, consectetur adipiscing elit,")})),t.addEvent(4,7,(()=>{a.ref&&a.ref.showMessage("door is locked")}))})).getComponent(u,r)).withChild(t.buildPrefab("objects",Y).withObjectCollideMap(n).make())).withChild(t.buildPrefab("player",j.z).withCollideMap(i).withCollideMap(n).withCollideMap(s).withCollideMap(o).withGridEventMap(r).withGridPointer(h).make().getGameObject(e)).withChild(t.buildGameObject("pointer").withComponent(f).withComponent(v).withComponent(y.N,(t=>{t.offset=0})).getComponent(v,h)).withChild(t.buildPrefab("camera",T,new d.P(0,0,10)).withTarget(e).getDialogController(a).make()).withChild(t.buildGameObject("font-loader").withComponent(q))}}class Z extends K{run(){return super.run().withChild(this.instantiater.buildGameObject("camera-scroll-override").withComponent(class extends r.w{start(){const t=this.engine.cameraContainer.camera;t.gameObject.getComponent(h.Y).enabled=!1,t.viewSize=3.5}}))}}const $={},J="Create Project",Q={unversionedId:"tutorial-2dtopdown/create-project",id:"tutorial-2dtopdown/create-project",title:"Create Project",description:"In this tutorial, you will learn how to use the engine by organizing your own game.",source:"@site/docs/2-tutorial-2dtopdown/1-create-project.mdx",sourceDirName:"2-tutorial-2dtopdown",slug:"/tutorial-2dtopdown/create-project",permalink:"/the-world-engine.ts/build/docs/tutorial-2dtopdown/create-project",draft:!1,editUrl:"https://github.com/The-World-Space/the-world-engine.ts/tree/main/docs/docusaurus/docs/2-tutorial-2dtopdown/1-create-project.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Debug Components",permalink:"/the-world-engine.ts/build/docs/getting-started/debug-components"},next:{title:"Editor Setup",permalink:"/the-world-engine.ts/build/docs/tutorial-2dtopdown/editor-setup"}},tt={},et=[{value:"Overview",id:"overview",level:2},{value:"Create Project",id:"create-project-1",level:2}],it={toc:et};function nt(t){let{components:e,...i}=t;return(0,s.kt)("wrapper",(0,n.Z)({},it,i,{components:e,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"create-project"},"Create Project"),(0,s.kt)("p",null,"In this tutorial, ",(0,s.kt)("strong",{parentName:"p"},"you will learn how to use the engine")," by organizing your own game."),(0,s.kt)("p",null,"We will use the features within the engine as much as possible to construct the scene of the ",(0,s.kt)("strong",{parentName:"p"},"2d topdown game")," with minimal code."),(0,s.kt)("h2",{id:"overview"},"Overview"),(0,s.kt)("p",null,"The game we're going to make looks like this.\nit used ",(0,s.kt)("strong",{parentName:"p"},"tile maps"),", ",(0,s.kt)("strong",{parentName:"p"},"collision maps"),", ",(0,s.kt)("strong",{parentName:"p"},"event maps"),", ",(0,s.kt)("strong",{parentName:"p"},"animated sprites"),", ",(0,s.kt)("strong",{parentName:"p"},"player grid movements"),", ",(0,s.kt)("strong",{parentName:"p"},"pathfinder"),",\nand we'll soon find out how to use all of these elements."),(0,s.kt)(o.Z,{bootstrapper:Z,allowScroll:!0,mdxType:"DocumentGame"}),(0,s.kt)("h2",{id:"create-project-1"},"Create Project"),(0,s.kt)("p",null,"First, follow the Installation Guide in ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("a",{parentName:"strong",href:"../getting-started/installation"},"Getting Started/Installation"))," to create a project."),(0,s.kt)("p",null,"And make a bootstrapper skeleton."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/index.ts"',title:'"src/index.ts"'},'import { Game } from "the-world-engine";\n\nimport { Bootstrapper } from "./asset/Bootstrapper";\n\nconst game = new Game(document.body);\ngame.run(Bootstrapper);\ngame.inputHandler.startHandleEvents();\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/asset/Bootstrapper.ts"',title:'"src/asset/Bootstrapper.ts"'},'import {\n    Bootstrapper as BaseBootstrapper,\n    Camera,\n    SceneBuilder\n} from "the-world-engine";\n\nexport class Bootstrapper extends BaseBootstrapper {\n    public override run(): SceneBuilder {\n        const instantiater = this.instantiater;\n\n        return this.sceneBuilder\n            .withChild(instantiater.buildGameObject("camera")\n                .withComponent(Camera))\n        ;\n    }\n}\n')),(0,s.kt)("p",null,"Now you're ready to make a scene. Most of our journeys will take place at Bootstrapper.ts."),(0,s.kt)("p",null,"Then let's get started!"))}nt.isMDXComponent=!0},5355:(t,e,i)=>{i.d(e,{y:()=>a});var n=i(4532),s=i(8172),o=i(9384),r=i(2684),h=i(2138);class a extends s.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[r.V],this.Nn=null,this.zn=null,this.Th=1,this.Ph=1,this.kn=18,this.Bn=10,this.qn=.2,this.An=0,this.Jn=new n.P(NaN,NaN,NaN)}awake(){const t=new o.s;this.zn=this.engine.scene.addChildFromBuilder(this.engine.instantiater.buildGameObject("grid-renderer",void 0,void 0,new n.P(this.qn,this.qn,this.qn)).active(!1).withComponent(h.w,(t=>{const e=document.createElement("div");e.style.backgroundImage="                        repeating-linear-gradient(#999 0 1px, transparent 1px 100%),                        repeating-linear-gradient(90deg, #999 0 1px, transparent 1px 100%)",e.style.backgroundSize=this.Th/this.qn/.1+"px "+this.Ph/this.qn/.1+"px",t.elementWidth=this.kn/this.qn,t.elementHeight=this.Bn/this.qn,t.pointerEvents=!1,t.element=e,t.viewScale=.1})).getComponent(h.w,t)),this.Nn=t.ref}onEnable(){this.zn.exists&&(this.zn.activeSelf=!0)}onDisable(){this.zn.exists&&(this.zn.activeSelf=!1)}update(){const t=this.transform.position,e=1/this.qn/.1,i=this.kn*e/2,n=this.Bn*e/2,s=this.Th*e,o=this.Ph*e,r=i%s,h=n%o;if(!t.equals(this.Jn)){const i=this.zn.transform.position;i.copy(t),i.z+=this.An,this.Nn.element.style.backgroundPosition=-t.x*e+r+s/2-.5+"px "+(t.y*e+h+o/2-.5)+"px"}}onDestroy(){var t;null===(t=this.zn)||void 0===t||t.destroy()}Qn(){const t=this.Nn;t&&(t.element.style.backgroundSize=this.Th/this.qn/.1+"px "+this.Ph/this.qn/.1+"px")}get gridCellWidth(){return this.Th}set gridCellWidth(t){this.Th=t,this.Qn()}get gridCellHeight(){return this.Ph}set gridCellHeight(t){this.Ph=t,this.Qn()}get renderWidth(){return this.kn}set renderWidth(t){this.kn=t,this.Nn&&(this.Nn.elementWidth=this.kn/this.qn)}get renderHeight(){return this.Bn}set renderHeight(t){this.Bn=t,this.Nn&&(this.Nn.elementHeight=this.Bn/this.qn)}get lineWidth(){return.1*this.qn}set lineWidth(t){this.qn=t/.1;const e=this.Nn;e&&(this.Qn(),e.elementWidth=this.kn/this.qn,e.elementHeight=this.Bn/this.qn,e.gameObject.transform.localScale.setScalar(this.qn))}get zOffset(){return this.An}set zOffset(t){this.An=t}}},9484:(t,e,i)=>{i.d(e,{Z:()=>n});const n=i.p+"assets/images/Overworld_Tileset-1c44075b314e79caada3455aa25f5809.png"}}]);