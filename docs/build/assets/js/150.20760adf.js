"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[150],{9558:(t,e,s)=>{s.d(e,{F:()=>l});var i=s(4532),h=s(6120),n=s(3674),r=s(8788);class l extends n.w{constructor(){super(...arguments),this.$r=new Map,this.Ih=1,this.Th=1,this.Sr=!1,this.Wr=[],this.Nr=[],this.Xr=!1}start(){this.Xr=!0;const t=this.Nr;for(let e=0;e<t.length;++e)t[e]();t.length=0}addEvent(t,e,s){this.Xr?(this.$r.set(`${t}_${e}`,s),this.Sr&&this.yr(t*this.gridCellWidth,e*this.gridCellHeight)):this.Nr.push((()=>{this.addEvent(t,e,s)}))}addEventsFromTwoDimensionalArray(t,e,s){if(this.Xr)for(let i=0;i<t.length;i++)for(let h=0;h<t[i].length;h++)null!==t[i][h]&&this.addEvent(h+e,t.length-(i+s),t[i][h]);else this.Nr.push((()=>{this.addEventsFromTwoDimensionalArray(t,e,s)}))}Yr(){this.$r.forEach(((t,e)=>{const[s,i]=e.split("_").map(Number);this.yr(s*this.gridCellWidth,i*this.gridCellHeight)}))}Kr(){const t=this.Wr;for(let e=0;e<t.length;++e)t[e].destroy();this.Wr.length=0}yr(t,e){const s={ref:null};this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("debug-image",new i.P(t,e,1e4)).withComponent(r._,(t=>{t.opacity=.5,t.imageWidth=this.gridCellWidth,t.imageHeight=this.gridCellHeight})).getGameObject(s)),this.Wr.push(s.ref)}tryInvokeEvent(t,e,s,i,h){const n=this.transform.position;t-=n.x,e-=n.y;const r=Math.floor(t/this.gridCellWidth),l=Math.floor((t+s)/this.gridCellWidth),o=Math.floor(e/this.gridCellHeight),d=Math.floor((e+i)/this.gridCellHeight);let a=!1;for(let c=o;c<=d;c++)for(let t=r;t<=l;t++)this.$r.has(`${t}_${c}`)&&(this.$r.get(`${t}_${c}`)(t,c,h),a=!0);return a}get gridCellWidth(){return this.Ih}set gridCellWidth(t){this.Ih=t}get gridCellHeight(){return this.Th}set gridCellHeight(t){this.Th=t}get showEvents(){return this.Sr}set showEvents(t){this.Sr=t,this.Sr?this.Yr():this.Kr()}get gridCenter(){const t=this.transform.position;return new h.F(t.x,t.y)}get gridCenterX(){return this.transform.position.x}get gridCenterY(){return this.transform.position.y}}},671:(t,e,s)=>{s.d(e,{r:()=>o});var i=s(4532),h=s(6120),n=s(3674),r=s(7888),l=s(8788);class o extends n.w{constructor(){super(...arguments),this.Mn=new Map,this.Ih=1,this.Th=1,this.Sr=!1,this.Co=!1,this._o=new Map,this.cn=!1,this.Nr=[],this.Xr=!1}start(){this.Xr=!0;const t=this.Nr;for(let e=0;e<t.length;++e)t[e]();this.Nr.length=0}onEnable(){this.Sr&&!this.Co&&(this.$o(),this.Co=!0),this.cn=!0}onDisable(){this.bo(),this.Co=!1,this.cn=!1}addCollider(t,e){this.Xr?this.Mn.has(`${t}_${e}`)||(this.Mn.set(`${t}_${e}`,!0),this.Sr&&this.yr(t*this.gridCellWidth,e*this.gridCellHeight)):this.Nr.push((()=>{this.addCollider(t,e)}))}addColliderFromTwoDimensionalArray(t,e,s){if(this.Xr)for(let i=0;i<t.length;i++)for(let h=0;h<t[i].length;h++)1===t[i][h]&&this.addCollider(h+e,t.length-(i+s));else this.Nr.push((()=>{this.addColliderFromTwoDimensionalArray(t,e,s)}))}removeCollider(t,e){this.Xr?(this.Mn.delete(`${t}_${e}`),this.Sr&&this.wo(t*this.gridCellWidth,e*this.gridCellHeight)):this.Nr.push((()=>{this.removeCollider(t,e)}))}removeAllColliders(){this.Mn.clear(),this.bo()}$o(){this.Mn.forEach(((t,e)=>{const[s,i]=e.split("_").map(Number);this.yr(s*this.gridCellWidth,i*this.gridCellHeight)}))}bo(){this._o.forEach((t=>{t.destroy()})),this._o.clear()}yr(t,e){const s=new r.s;this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("debug-image",new i.P(t,e,41e4)).withComponent(l._,(t=>{t.opacity=.5,t.pointerEvents=!1,t.imageWidth=this.gridCellWidth,t.imageHeight=this.gridCellHeight})).getGameObject(s)),this._o.set(`${t}_${e}`,s.ref)}wo(t,e){const s=this._o.get(`${t}_${e}`);s&&(s.destroy(),this._o.delete(`${t}_${e}`))}checkCollision(t,e,s,i){if(!this.cn)return!1;const h=this.transform.position;t-=h.x,e-=h.y;const n=Math.floor(t/this.gridCellWidth),r=Math.floor((t+s)/this.gridCellWidth),l=Math.floor(e/this.gridCellHeight),o=Math.floor((e+i)/this.gridCellHeight);for(let d=l;d<=o;d++)for(let t=n;t<=r;t++)if(this.Mn.get(`${t}_${d}`))return!0;return!1}getCollidersToArray(){const t=[];return this.Mn.forEach(((e,s)=>{const[i,n]=s.split("_").map(Number);t.push(new h.F(i,n))})),t}get gridCellWidth(){return this.Ih}set gridCellWidth(t){this.Ih=t}get gridCellHeight(){return this.Th}set gridCellHeight(t){this.Th=t}get showCollider(){return this.Sr}set showCollider(t){this.Sr!==t&&(this.Sr=t,this.Sr&&!this.Co?(this.$o(),this.Co=!0):(this.bo(),this.Co=!1))}get gridCenter(){const t=this.transform.position;return new h.F(t.x,t.y)}get gridCenterX(){return this.transform.position.x}get gridCenterY(){return this.transform.position.y}}},2515:(t,e,s)=>{s.d(e,{u:()=>r});var i=s(4532),h=s(3674),n=s(8788);class r extends h.w{constructor(){super(...arguments),this.Mn=new Map,this.Mo=!1,this.Io=!1,this._o=new Map,this.Do=null,this.So=!1,this.Nr=[],this.Xr=!1}start(){this.Xr=!0;const t=this.Nr;for(let e=0;e<t.length;++e)t[e]();if(this.Nr.length=0,!this.Do)throw new Error("GridCollider: gridObjectCollideMap must be set")}onEnable(){this.Mo&&!this.Io&&(this.$o(),this.Io=!0),this.jo()}onDisable(){this.Mo&&(this.bo(),this.Io=!1),this.So&&this.To()}onDestroy(){this.bo(),this.To()}addCollider(t,e){this.Xr?this.Mn.has(`${t}_${e}`)||(this.Mn.set(`${t}_${e}`,!0),this.Mo&&this.yr(t,e),this.gridObjectCollideMap&&this.yo(t,e)):this.Nr.push((()=>{this.addCollider(t,e)}))}addColliderFromTwoDimensionalArray(t,e,s){if(this.Xr)for(let i=0;i<t.length;i++)for(let h=0;h<t[i].length;h++)1===t[i][h]&&this.addCollider(h+e,t.length-i-1+s);else this.Nr.push((()=>{this.addColliderFromTwoDimensionalArray(t,e,s)}))}removeCollider(t,e){this.Xr?(this.Mn.delete(`${t}_${e}`),this.Mo&&this.wo(t,e),this.gridObjectCollideMap&&this.Ao(t,e)):this.Nr.push((()=>{this.removeCollider(t,e)}))}$o(){this.Mn.forEach(((t,e)=>{const[s,i]=e.split("_").map(Number);this.yr(s,i)}))}bo(){this._o.forEach((t=>{t.destroy()})),this._o.clear()}yr(t,e){if(!this.Do)return;const s=this.Do.gridCellWidth,h=this.Do.gridCellHeight,r=t*s,l=e*h,o={ref:null};this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("debug-image",new i.P(r,l,41e4)).withComponent(n._,(t=>{t.opacity=.5,t.imageWidth=s,t.imageHeight=h})).getGameObject(o)),this._o.set(`${t}_${e}`,o.ref)}wo(t,e){const s=this._o.get(`${t}_${e}`);s&&(s.destroy(),this._o.delete(`${t}_${e}`))}yo(t,e){if(!this.Do)return;const s=this.transform.position,i=this.Do.gridCellWidth,h=this.Do.gridCellHeight,n=this.Do.gridCenter,r=Math.floor(t+(s.x+n.x)/i),l=Math.floor(e+(s.y+n.y)/h);this.Do.addCollider(r,l)}jo(){if(!this.Do)return;const t=this.transform.position,e=this.Do.gridCellWidth,s=this.Do.gridCellHeight,i=this.Do.gridCenter;this.Mn.forEach(((h,n)=>{const[r,l]=n.split("_").map(Number),o=Math.floor(r+t.x/e+i.x),d=Math.floor(l+t.y/s+i.y);this.Do.addCollider(o,d)}))}Ao(t,e){if(!this.Do)return;const s=this.transform.position,i=this.Do.gridCellWidth,h=this.Do.gridCellHeight,n=this.Do.gridCenter,r=Math.floor(t+(s.x+n.x)/i),l=Math.floor(e+(s.y+n.y)/h);this.Do.removeCollider(r,l)}To(){if(!this.Do)return;const t=this.transform.position,e=this.Do.gridCellWidth,s=this.Do.gridCellHeight,i=this.Do.gridCenter;this.Mn.forEach(((h,n)=>{const[r,l]=n.split("_").map(Number),o=Math.floor(r+(t.x+i.x)/e),d=Math.floor(l+(t.y+i.y)/s);this.Do.removeCollider(o,d)}))}get gridObjectCollideMap(){return this.Do}set gridObjectCollideMap(t){this.So&&this.To(),this.Do=t,this.jo(),this.So=!0,this.Do&&this.Mo&&(this.bo(),this.$o())}get showCollideSpot(){return this.Mo}set showCollideSpot(t){this.Mo!==t&&(this.Mo=t,this.Mo&&!this.Io?(this.$o(),this.Io=!0):(this.bo(),this.Io=!1))}}},2382:(t,e,s)=>{s.d(e,{I:()=>o});var i=s(4532),h=s(6120),n=s(3674),r=s(7888),l=s(8788);class o extends n.w{constructor(){super(...arguments),this.Mn=new Map,this.Ih=1,this.Th=1,this.Sr=!1,this.Co=!1,this._o=new Map,this.cn=!1,this.Nr=[],this.Xr=!1}start(){this.Xr=!0;const t=this.Nr;for(let e=0;e<t.length;++e)t[e]();this.Nr.length=0}onEnable(){this.Sr&&!this.Co&&(this.$o(),this.Co=!0),this.cn=!0}onDisable(){this.bo(),this.Co=!1,this.cn=!1}addCollider(t,e){if(!this.Xr)return void this.Nr.push((()=>{this.addCollider(t,e)}));const s=this.Mn.get(`${t}_${e}`);this.Mn.set(`${t}_${e}`,void 0===s?1:s+1),this.Sr&&this.yr(t*this.gridCellWidth,e*this.gridCellHeight)}addColliderFromTwoDimensionalArray(t,e,s){if(this.Xr)for(let i=0;i<t.length;i++)for(let h=0;h<t[i].length;h++)1===t[i][h]&&this.addCollider(h+e,t.length-(i+s));else this.Nr.push((()=>{this.addColliderFromTwoDimensionalArray(t,e,s)}))}removeCollider(t,e){const s=this.Mn.get(`${t}_${e}`);void 0!==s&&(1===s?this.Mn.delete(`${t}_${e}`):this.Mn.set(`${t}_${e}`,s-1),this.Sr&&this.wo(t*this.gridCellWidth,e*this.gridCellHeight))}$o(){this.Mn.forEach(((t,e)=>{const[s,i]=e.split("_").map(Number);this.yr(s*this.gridCellWidth,i*this.gridCellHeight)}))}bo(){this._o.forEach((t=>{t.destroy()})),this._o.clear()}yr(t,e){const s=new r.s;this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("debug-image",new i.P(t,e,41e4)).withComponent(l._,(t=>{t.opacity=.5,t.pointerEvents=!1,t.imageWidth=this.gridCellWidth,t.imageHeight=this.gridCellHeight})).getGameObject(s)),this._o.set(`${t}_${e}`,s.ref)}wo(t,e){const s=this._o.get(`${t}_${e}`);s&&(s.destroy(),this._o.delete(`${t}_${e}`))}checkCollision(t,e,s,i){if(!this.cn)return!1;const h=this.transform.position;t-=h.x,e-=h.y;const n=Math.floor(t/this.gridCellWidth),r=Math.floor((t+s)/this.gridCellWidth),l=Math.floor(e/this.gridCellHeight),o=Math.floor((e+i)/this.gridCellHeight);for(let d=l;d<=o;d++)for(let t=n;t<=r;t++){const e=this.Mn.get(`${t}_${d}`);if(void 0!==e&&e>0)return!0}return!1}get gridCellWidth(){return this.Ih}set gridCellWidth(t){this.Ih=t}get gridCellHeight(){return this.Th}set gridCellHeight(t){this.Th=t}get showCollider(){return this.Sr}set showCollider(t){this.Sr!==t&&(this.Sr=t,this.Sr&&!this.Co?(this.$o(),this.Co=!0):(this.bo(),this.Co=!1))}get gridCenter(){const t=this.transform.position;return new h.F(t.x,t.y)}get gridCenterX(){return this.transform.position.x}get gridCenterY(){return this.transform.position.y}}},9328:(t,e,s)=>{s.d(e,{P:()=>d});var i=s(4532),h=s(621),n=s(3674),r=s(7888),l=s(1466),o=s(6066);class d extends n.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[o.v],this.vn=null,this.Pn=0,this.wn=null,this.En=null,this.Is=new h.n,this.Xs=new h.n,this.Gs=new h.n,this.Dn=!1,this.Xr=!1,this.bn=t=>{this.wn.activeSelf=!0,this.Gn(t)},this.Hn=t=>{this.Dn&&this.In(t),this.wn.activeSelf=!1},this.Ln=t=>{var e;this.Dn=!0,this.yn(t);const s=null===(e=this.En)||void 0===e?void 0:e.element;s&&(s.style.backgroundColor="#DDDDDD"),this.Is.invoke(t)},this.In=t=>{var e;this.Dn=!1,this.yn(t);const s=null===(e=this.En)||void 0===e?void 0:e.element;s&&(s.style.backgroundColor="white"),this.Xs.invoke(t)},this.Gn=t=>{this.yn(t),this.Gs.invoke(t)}}start(){this.vn=this.gameObject.getComponent(o.v),this.vn.onPointerEnter.addListener(this.bn),this.vn.onPointerLeave.addListener(this.Hn),this.vn.onPointerDown.addListener(this.Ln),this.vn.onPointerUp.addListener(this.In),this.vn.onPointerMove.addListener(this.Gn);const t=new r.s,e=new r.s;this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("pointer",new i.P(0,0,this.Pn)).active(!1).withComponent(l.w,(t=>{t.pointerEvents=!1;const e=document.createElement("div");e.style.backgroundColor="white",e.style.opacity="0.3",t.element=e})).getComponent(l.w,e).getGameObject(t)),this.wn=t.ref,this.En=e.ref,this.Xr=!0}onDestroy(){this.Xr&&this.vn&&(this.vn.onPointerEnter.removeListener(this.bn),this.vn.onPointerLeave.removeListener(this.Hn),this.vn.onPointerDown.removeListener(this.Ln),this.vn.onPointerUp.removeListener(this.In),this.vn.onPointerMove.removeListener(this.Gn))}yn(t){const e=this.vn.gridCellWidth,s=this.vn.gridCellHeight,i=this.vn.gridCenter,h=t.gridPosition.x*e+i.x,n=t.gridPosition.y*s+i.y;this.wn.transform.localPosition.set(h,n,this.Pn)}get onPointerDown(){return this.Is}get onPointerUp(){return this.Xs}get onPointerMove(){return this.Gs}get pointerZoffset(){return this.Pn}set pointerZoffset(t){this.Pn=t}}},6066:(t,e,s)=>{s.d(e,{v:()=>a});var i=s(6120),h=s(4532),n=s(621),r=s(3674),l=s(4627),o=s(6684);class d{constructor(t,e,s){this.xn=new i.F(t.x,t.y),this.Sn=new i.F(e.x,e.y),this.Tn=s}get gridPosition(){return this.xn}get position(){return this.Sn}get button(){return this.Tn}}class a extends r.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.Vn=null,this.Wn=null,this.Ih=1,this.Th=1,this.Rh=new i.F,this.un=.1,this.jn=64,this.Kn=64,this.Is=new n.n,this.Xs=new n.n,this.Ys=new n.n,this.zs=new n.n,this.Gs=new n.n,this.Zs=null,this.Js=!1,this.Xr=!1,this.On=new h.P,this.Fn=t=>{const e=this.Un(t.offsetX,t.offsetY,t.button);this.Is.invoke(e)},this.Xn=t=>{const e=this.Un(t.offsetX,t.offsetY,t.button);this.Xs.invoke(e)},this.Yn=t=>{const e=this.Un(t.offsetX,t.offsetY,t.button);this.Ys.invoke(e)},this.kn=t=>{const e=this.Un(t.offsetX,t.offsetY,t.button);this.zs.invoke(e)},this.qn=t=>{const e=this.Un(t.offsetX,t.offsetY,t.button);this.Gs.invoke(e)},this.zn=t=>{this.Zs=()=>{this.ke("mouseenter",t.touches[0]),this.ke("mousedown",t.touches[0])}},this.An=t=>{this.Js&&(this.Js=!1,this.ke("mouseup",t.changedTouches[0]),this.ke("mouseleave",t.changedTouches[0]))},this.Bn=t=>{this.Zs&&(this.Zs(),this.Zs=null),this.ke("mousemove",t.touches[0]),this.Js=!0},this.Jn=t=>{this.Js&&(this.Js=!1,this.ke("mouseleave",t.changedTouches[0]))}}start(){this.Wn=document.createElement("div"),this.Vn=new o.cp(this.Wn),this.Vn.scale.setScalar(this.un),this.Wn.style.width=this.jn/this.un+"px",this.Wn.style.height=this.Kn/this.un+"px",this.Wn.addEventListener("mousedown",this.Fn),this.Wn.addEventListener("mouseup",this.Xn),this.Wn.addEventListener("mouseenter",this.Yn),this.Wn.addEventListener("mouseleave",this.kn),this.Wn.addEventListener("mousemove",this.qn),this.Wn.addEventListener("touchstart",this.zn),this.Wn.addEventListener("touchend",this.An),this.Wn.addEventListener("touchmove",this.Bn),this.Wn.addEventListener("touchcancel",this.Jn),this.transform.unsafeGetObject3D().add(this.Vn),l.w.updateRawObject3DWorldMatrixRecursively(this.Vn),this.transform.enqueueRenderAttachedObject3D(this.Vn),this.Xr=!0}update(){let t;this.On.copy(this.engine.cameraContainer.camera.transform.position),t=this.transform.parent?this.transform.parent.inverseTransformPoint(this.On):this.On,this.Vn.position.x=t.x,this.Vn.position.y=t.y,l.w.updateRawObject3DWorldMatrixRecursively(this.Vn),this.transform.enqueueRenderAttachedObject3D(this.Vn)}onDestroy(){this.Xr&&(this.Wn&&(this.Wn.removeEventListener("mousedown",this.Fn),this.Wn.removeEventListener("mouseup",this.Xn),this.Wn.removeEventListener("mouseenter",this.Yn),this.Wn.removeEventListener("mouseleave",this.kn),this.Wn.removeEventListener("mousemove",this.qn),this.Wn.removeEventListener("touchstart",this.zn),this.Wn.removeEventListener("touchend",this.An),this.Wn.removeEventListener("touchmove",this.Bn),this.Wn.removeEventListener("touchcancel",this.Jn)),this.Vn&&this.transform.unsafeGetObject3D().remove(this.Vn))}onWorldMatrixUpdated(){this.Vn&&(l.w.updateRawObject3DWorldMatrixRecursively(this.Vn),this.transform.enqueueRenderAttachedObject3D(this.Vn))}Un(t,e,s){t*=this.un,e*=this.un;const h=this.transform.position,n=this.Vn.position.x+h.x-this.jn/2+t-this.Rh.x,r=this.Vn.position.y+h.y-this.Kn/2+(this.Kn-e)-this.Rh.y,l=Math.floor((n+.5*this.Ih)/this.Ih),o=Math.floor((r+.5*this.Th)/this.Th);return new d(new i.F(l,o),new i.F(n,r),s)}ke(t,e){const s=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,detail:1,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.target.dispatchEvent(s)}get onPointerDown(){return this.Is}get onPointerUp(){return this.Xs}get onPointerEnter(){return this.Ys}get onPointerLeave(){return this.zs}get onPointerMove(){return this.Gs}get gridCenter(){return this.Rh}set gridCenter(t){this.Rh.copy(t)}get gridCellWidth(){return this.Ih}set gridCellWidth(t){this.Ih=t}get gridCellHeight(){return this.Th}set gridCellHeight(t){this.Th=t}setGridInfoFromCollideMap(t){this.Ih=t.gridCellWidth,this.Th=t.gridCellHeight,this.Rh.set(t.gridCenterX,t.gridCenterY)}get inputWidth(){return this.jn}set inputWidth(t){this.jn=t,this.Wn&&(this.Wn.style.width=this.jn/this.un+"px")}get inputHeight(){return this.Kn}set inputHeight(t){this.Kn=t,this.Wn&&(this.Wn.style.height=this.Kn/this.un+"px")}get viewScale(){return this.un}set viewScale(t){this.un=t,this.Wn&&(this.Wn.style.width=this.jn/this.un+"px",this.Wn.style.height=this.Kn/this.un+"px"),this.Vn&&(this.Vn.scale.setScalar(this.un),l.w.updateRawObject3DWorldMatrixRecursively(this.Vn),this.transform.enqueueRenderAttachedObject3D(this.Vn))}}},6885:(t,e,s)=>{s.d(e,{y:()=>o});var i=s(4532),h=s(3674),n=s(7888),r=s(6896),l=s(1466);class o extends h.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[r.V],this.hd=null,this.rd=null,this.Ih=1,this.Th=1,this.nd=18,this.od=10,this.dd=.2,this.ad=0,this.ld=new i.P(NaN,NaN,NaN)}awake(){const t=new n.s;this.rd=this.engine.scene.addChildFromBuilder(this.engine.instantiater.buildGameObject("grid-renderer",void 0,void 0,new i.P(this.dd,this.dd,this.dd)).active(!1).withComponent(l.w,(t=>{const e=document.createElement("div");e.style.backgroundImage="                        repeating-linear-gradient(#999 0 1px, transparent 1px 100%),                        repeating-linear-gradient(90deg, #999 0 1px, transparent 1px 100%)",e.style.backgroundSize=this.Ih/this.dd/.1+"px "+this.Th/this.dd/.1+"px",t.elementWidth=this.nd/this.dd,t.elementHeight=this.od/this.dd,t.pointerEvents=!1,t.element=e,t.viewScale=.1})).getComponent(l.w,t)),this.hd=t.ref}onEnable(){this.rd.exists&&(this.rd.activeSelf=!0)}onDisable(){this.rd.exists&&(this.rd.activeSelf=!1)}update(){const t=this.transform.position,e=1/this.dd/.1,s=this.nd*e/2,i=this.od*e/2,h=this.Ih*e,n=this.Th*e,r=s%h,l=i%n;if(!t.equals(this.ld)){const s=this.rd.transform.position;s.copy(t),s.z+=this.ad,this.hd.element.style.backgroundPosition=-t.x*e+r+h/2-.5+"px "+(t.y*e+l+n/2-.5)+"px"}}onDestroy(){var t;null===(t=this.rd)||void 0===t||t.destroy()}fd(){const t=this.hd;t&&(t.element.style.backgroundSize=this.Ih/this.dd/.1+"px "+this.Th/this.dd/.1+"px")}get gridCellWidth(){return this.Ih}set gridCellWidth(t){this.Ih=t,this.fd()}get gridCellHeight(){return this.Th}set gridCellHeight(t){this.Th=t,this.fd()}get renderWidth(){return this.nd}set renderWidth(t){this.nd=t,this.hd&&(this.hd.elementWidth=this.nd/this.dd)}get renderHeight(){return this.od}set renderHeight(t){this.od=t,this.hd&&(this.hd.elementHeight=this.od/this.dd)}get lineWidth(){return.1*this.dd}set lineWidth(t){this.dd=t/.1;const e=this.hd;e&&(this.fd(),e.elementWidth=this.nd/this.dd,e.elementHeight=this.od/this.dd,e.gameObject.transform.localScale.setScalar(this.dd))}get zOffset(){return this.ad}set zOffset(t){this.ad=t}}},1466:(t,e,s)=>{s.d(e,{w:()=>n});var i=s(4627),h=s(6924);class n extends h.Y{constructor(){super(...arguments),this.tu=1,this.su=1,this.iu=!1,this.Ca=null}renderInitialize(){var t;null===(t=this.Ca)||void 0===t||t.call(this),this.htmlElement||(this.element=null)}updateCenterOffset(t){if(!this.css3DObject)return;let e,s;if(this.iu)if(this.css3DObject.element.parentElement){const t=this.css3DObject.element.style.display;this.css3DObject.element.style.display="",e=this.css3DObject.element.offsetWidth*this.viewScale,s=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=t}else{const t=this.css3DObject.element.style.display;this.css3DObject.element.style.display="";const i=this.css3DObject.element.style.transform;this.css3DObject.element.style.transform="translateX(1000000px)",document.body.appendChild(this.css3DObject.element),e=this.css3DObject.element.offsetWidth*this.viewScale,s=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=t,this.css3DObject.element.style.transform=i,document.body.removeChild(this.css3DObject.element)}else e=this.tu,s=this.su;this.css3DObject.position.set(e*this.centerOffset.x,s*this.centerOffset.y,0),t&&(i.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}updateViewScale(t){if(!this.css3DObject)return;const e=this.viewScale;this.iu?(this.css3DObject.scale.set(e,e,e),this.updateCenterOffset(!1)):(this.css3DObject.element.style.width=this.tu/this.viewScale+"px",this.css3DObject.element.style.height=this.su/this.viewScale+"px",this.css3DObject.scale.set(e,e,e)),t&&(i.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}get element(){return this.htmlElement}set element(t){const e=this.htmlElement=null!=t?t:document.createElement("div");this.readyToDraw?this.hu(e):this.Ca=()=>this.hu(e)}hu(t){this.iu?(t.style.width="auto",t.style.height="auto"):(t.style.width=this.tu/this.viewScale+"px",t.style.height=this.su/this.viewScale+"px");const e=this.initializeBaseComponents(!0);i.w.updateRawObject3DWorldMatrixRecursively(e),this.transform.enqueueRenderAttachedObject3D(e)}get elementWidth(){if(this.iu){if(this.htmlElement){const t=this.htmlElement.style.display;this.htmlElement.style.display="";const e=this.htmlElement.offsetWidth*this.viewScale;return this.htmlElement.style.display=t,e}return 0}return this.tu}set elementWidth(t){this.iu||(this.tu=t,this.htmlElement&&(this.htmlElement.style.width=t/this.viewScale+"px"),this.updateCenterOffset(!0))}get elementHeight(){if(this.iu){if(this.htmlElement){const t=this.htmlElement.style.display;this.htmlElement.style.display="";const e=this.htmlElement.offsetHeight*this.viewScale;return this.htmlElement.style.display=t,e}return 0}return this.su}set elementHeight(t){this.iu||(this.su=t,this.htmlElement&&(this.htmlElement.style.height=t/this.viewScale+"px"),this.updateCenterOffset(!0))}get autoSize(){return this.iu}set autoSize(t){this.iu=t,this.htmlElement&&(t?(this.htmlElement.style.width="auto",this.htmlElement.style.height="auto"):(this.htmlElement.style.width=this.tu/this.viewScale+"px",this.htmlElement.style.height=this.su/this.viewScale+"px"))}}},2441:(t,e,s)=>{s.d(e,{Km:()=>d,PH:()=>i});var i,h,n,r=s(4627),l=s(9760),o=s(6924);(h=i||(i={})).Left="left",h.Center="center",h.Right="right",function(t){t.Normal="normal",t.Bold="bold"}(n||(n={}));class d extends o.Y{constructor(){super(...arguments),this.tf=2,this.if=1,this.iu=!1,this.sf=8,this.hf=n.Normal,this.ef="Arial",this.rf=i.Left,this.nf=new l.I(1,1,1,1),this.ff=null,this.Ca=null}renderInitialize(){var t;null===(t=this.Ca)||void 0===t||t.call(this),this.htmlElement||(this.text=d._defaultText)}updateCenterOffset(t){if(!this.css3DObject)return;let e,s;if(this.iu)if(this.css3DObject.element.parentElement){const t=this.css3DObject.element.style.display;this.css3DObject.element.style.display="",e=this.css3DObject.element.offsetWidth*this.viewScale,s=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=t}else{const t=this.css3DObject.element.style.display;this.css3DObject.element.style.display="";const i=this.css3DObject.element.style.transform;this.css3DObject.element.style.transform="translateX(1000000px)",document.body.appendChild(this.css3DObject.element),e=this.css3DObject.element.offsetWidth*this.viewScale,s=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=t,this.css3DObject.element.style.transform=i,document.body.removeChild(this.css3DObject.element)}else e=this.tf,s=this.if;this.css3DObject.position.set(e*this.centerOffset.x,s*this.centerOffset.y,0),t&&(r.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}updateViewScale(t){if(!this.css3DObject)return;const e=this.viewScale;this.iu?(this.css3DObject.scale.set(e,e,e),this.updateCenterOffset(!1)):(this.css3DObject.element.style.width=this.tf/this.viewScale+"px",this.css3DObject.element.style.height=this.if/this.viewScale+"px",this.css3DObject.scale.set(e,e,e)),t&&(r.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}get text(){return this.ff}set text(t){this.ff=t,this.readyToDraw?this.lf(t):this.Ca=()=>this.lf(t)}lf(t){this.htmlElement||(this.htmlElement=document.createElement("div")),this.htmlElement.textContent=null!=t?t:"",this.iu?(this.htmlElement.style.width="auto",this.htmlElement.style.height="auto"):(this.htmlElement.style.width=this.tf+"px",this.htmlElement.style.height=this.if+"px"),this.htmlElement.style.fontSize=this.sf+"px",this.htmlElement.style.fontWeight=this.hf,this.htmlElement.style.fontFamily=this.ef,this.htmlElement.style.textAlign=this.rf,this.htmlElement.style.color=this.nf.toHex(),this.htmlElement.style.opacity=this.nf.a.toString();const e=this.initializeBaseComponents(!1);r.w.updateRawObject3DWorldMatrixRecursively(e),this.transform.enqueueRenderAttachedObject3D(e)}get textWidth(){if(this.iu){if(this.htmlElement){const t=this.htmlElement.style.display;this.htmlElement.style.display="";const e=this.htmlElement.offsetWidth;return this.htmlElement.style.display=t,e}return 0}return this.tf}set textWidth(t){this.iu||(this.tf=t,this.htmlElement&&(this.htmlElement.style.width=t/this.viewScale+"px"),this.updateCenterOffset(!0))}get textHeight(){if(this.iu){if(this.htmlElement){const t=this.htmlElement.style.display;this.htmlElement.style.display="";const e=this.htmlElement.offsetHeight;return this.htmlElement.style.display=t,e}return 0}return this.if}set textHeight(t){this.iu||(this.if=t,this.htmlElement&&(this.htmlElement.style.height=t/this.viewScale+"px"),this.updateCenterOffset(!0))}get autoSize(){return this.iu}set autoSize(t){this.iu=t,this.htmlElement&&(t?(this.htmlElement.style.width="auto",this.htmlElement.style.height="auto"):(this.htmlElement.style.width=this.tf/this.viewScale+"px",this.htmlElement.style.height=this.if/this.viewScale+"px"))}get fontSize(){return this.sf}set fontSize(t){this.sf=t,this.htmlElement&&(this.htmlElement.style.fontSize=t+"px")}get fontWeight(){return this.hf}set fontWeight(t){this.hf=t,this.htmlElement&&(this.htmlElement.style.fontWeight=t)}get fontFamily(){return this.ef}set fontFamily(t){this.ef=t,this.htmlElement&&(this.htmlElement.style.fontFamily=t)}get textAlign(){return this.rf}set textAlign(t){this.rf=t,this.htmlElement&&(this.htmlElement.style.textAlign=t)}get textColor(){return this.nf}set textColor(t){this.nf.copy(t),this.htmlElement&&(this.htmlElement.style.color=t.toHex(),this.htmlElement.style.opacity=t.a.toString())}}d._defaultText="Text"}}]);