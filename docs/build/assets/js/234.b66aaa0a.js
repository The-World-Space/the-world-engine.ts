"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[234],{9913:(t,e,i)=>{i.d(e,{r:()=>n});var s=i(4532),h=i(6120),r=i(8172),l=i(9384),o=i(6324);class n extends r.w{constructor(){super(...arguments),this.fn=new Map,this.Th=1,this.Ph=1,this.$r=!1,this.ao=!1,this.fo=new Map,this.tn=!1,this.Sr=[],this.zr=!1}start(){this.zr=!0;const t=this.Sr;for(let e=0;e<t.length;++e)t[e]();this.Sr.length=0}onEnable(){this.$r&&!this.ao&&(this.do(),this.ao=!0),this.tn=!0}onDisable(){this.uo(),this.ao=!1,this.tn=!1}addCollider(t,e){this.zr?this.fn.has(`${t}_${e}`)||(this.fn.set(`${t}_${e}`,!0),this.$r&&this._r(t*this.gridCellWidth,e*this.gridCellHeight)):this.Sr.push((()=>{this.addCollider(t,e)}))}addColliderFromTwoDimensionalArray(t,e,i){if(this.zr)for(let s=0;s<t.length;s++)for(let h=0;h<t[s].length;h++)1===t[s][h]&&this.addCollider(h+e,t.length-(s+i));else this.Sr.push((()=>{this.addColliderFromTwoDimensionalArray(t,e,i)}))}removeCollider(t,e){this.zr?(this.fn.delete(`${t}_${e}`),this.$r&&this.co(t*this.gridCellWidth,e*this.gridCellHeight)):this.Sr.push((()=>{this.removeCollider(t,e)}))}removeAllColliders(){this.fn.clear(),this.uo()}do(){this.fn.forEach(((t,e)=>{const[i,s]=e.split("_").map(Number);this._r(i*this.gridCellWidth,s*this.gridCellHeight)}))}uo(){this.fo.forEach((t=>{t.destroy()})),this.fo.clear()}_r(t,e){const i=new l.s;this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("debug-image",new s.P(t,e,41e4)).withComponent(o._,(t=>{t.opacity=.5,t.pointerEvents=!1,t.imageWidth=this.gridCellWidth,t.imageHeight=this.gridCellHeight})).getGameObject(i)),this.fo.set(`${t}_${e}`,i.ref)}co(t,e){const i=this.fo.get(`${t}_${e}`);i&&(i.destroy(),this.fo.delete(`${t}_${e}`))}checkCollision(t,e,i,s){if(!this.tn)return!1;const h=this.transform.position;t-=h.x,e-=h.y;const r=Math.floor(t/this.gridCellWidth),l=Math.floor((t+i)/this.gridCellWidth),o=Math.floor(e/this.gridCellHeight),n=Math.floor((e+s)/this.gridCellHeight);for(let d=o;d<=n;d++)for(let t=r;t<=l;t++)if(this.fn.get(`${t}_${d}`))return!0;return!1}getCollidersToArray(){const t=[];return this.fn.forEach(((e,i)=>{const[s,r]=i.split("_").map(Number);t.push(new h.F(s,r))})),t}get gridCellWidth(){return this.Th}set gridCellWidth(t){this.Th=t}get gridCellHeight(){return this.Ph}set gridCellHeight(t){this.Ph=t}get showCollider(){return this.$r}set showCollider(t){this.$r!==t&&(this.$r=t,this.$r&&!this.ao?(this.do(),this.ao=!0):(this.uo(),this.ao=!1))}get gridCenter(){const t=this.transform.position;return new h.F(t.x,t.y)}get gridCenterX(){return this.transform.position.x}get gridCenterY(){return this.transform.position.y}}},1285:(t,e,i)=>{i.d(e,{u:()=>l});var s=i(4532),h=i(8172),r=i(6324);class l extends h.w{constructor(){super(...arguments),this.fn=new Map,this.po=!1,this.mo=!1,this.fo=new Map,this._o=null,this.Co=!1,this.Sr=[],this.zr=!1}start(){this.zr=!0;const t=this.Sr;for(let e=0;e<t.length;++e)t[e]();if(this.Sr.length=0,!this._o)throw new Error("GridCollider: gridObjectCollideMap must be set")}onEnable(){this.po&&!this.mo&&(this.do(),this.mo=!0),this.Mo()}onDisable(){this.po&&(this.uo(),this.mo=!1),this.Co&&this.bo()}onDestroy(){this.uo(),this.bo()}addCollider(t,e){this.zr?this.fn.has(`${t}_${e}`)||(this.fn.set(`${t}_${e}`,!0),this.po&&this._r(t,e),this.gridObjectCollideMap&&this.vo(t,e)):this.Sr.push((()=>{this.addCollider(t,e)}))}addColliderFromTwoDimensionalArray(t,e,i){if(this.zr)for(let s=0;s<t.length;s++)for(let h=0;h<t[s].length;h++)1===t[s][h]&&this.addCollider(h+e,t.length-s-1+i);else this.Sr.push((()=>{this.addColliderFromTwoDimensionalArray(t,e,i)}))}removeCollider(t,e){this.zr?(this.fn.delete(`${t}_${e}`),this.po&&this.co(t,e),this.gridObjectCollideMap&&this.$o(t,e)):this.Sr.push((()=>{this.removeCollider(t,e)}))}do(){this.fn.forEach(((t,e)=>{const[i,s]=e.split("_").map(Number);this._r(i,s)}))}uo(){this.fo.forEach((t=>{t.destroy()})),this.fo.clear()}_r(t,e){if(!this._o)return;const i=this._o.gridCellWidth,h=this._o.gridCellHeight,l=t*i,o=e*h,n={ref:null};this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("debug-image",new s.P(l,o,41e4)).withComponent(r._,(t=>{t.opacity=.5,t.imageWidth=i,t.imageHeight=h})).getGameObject(n)),this.fo.set(`${t}_${e}`,n.ref)}co(t,e){const i=this.fo.get(`${t}_${e}`);i&&(i.destroy(),this.fo.delete(`${t}_${e}`))}vo(t,e){if(!this._o)return;const i=this.transform.position,s=this._o.gridCellWidth,h=this._o.gridCellHeight,r=this._o.gridCenter,l=Math.floor(t+(i.x+r.x)/s),o=Math.floor(e+(i.y+r.y)/h);this._o.addCollider(l,o)}Mo(){if(!this._o)return;const t=this.transform.position,e=this._o.gridCellWidth,i=this._o.gridCellHeight,s=this._o.gridCenter;this.fn.forEach(((h,r)=>{const[l,o]=r.split("_").map(Number),n=Math.floor(l+t.x/e+s.x),d=Math.floor(o+t.y/i+s.y);this._o.addCollider(n,d)}))}$o(t,e){if(!this._o)return;const i=this.transform.position,s=this._o.gridCellWidth,h=this._o.gridCellHeight,r=this._o.gridCenter,l=Math.floor(t+(i.x+r.x)/s),o=Math.floor(e+(i.y+r.y)/h);this._o.removeCollider(l,o)}bo(){if(!this._o)return;const t=this.transform.position,e=this._o.gridCellWidth,i=this._o.gridCellHeight,s=this._o.gridCenter;this.fn.forEach(((h,r)=>{const[l,o]=r.split("_").map(Number),n=Math.floor(l+(t.x+s.x)/e),d=Math.floor(o+(t.y+s.y)/i);this._o.removeCollider(n,d)}))}get gridObjectCollideMap(){return this._o}set gridObjectCollideMap(t){this.Co&&this.bo(),this._o=t,this.Mo(),this.Co=!0,this._o&&this.po&&(this.uo(),this.do())}get showCollideSpot(){return this.po}set showCollideSpot(t){this.po!==t&&(this.po=t,this.po&&!this.mo?(this.do(),this.mo=!0):(this.uo(),this.mo=!1))}}},3361:(t,e,i)=>{i.d(e,{I:()=>n});var s=i(4532),h=i(6120),r=i(8172),l=i(9384),o=i(6324);class n extends r.w{constructor(){super(...arguments),this.fn=new Map,this.Th=1,this.Ph=1,this.$r=!1,this.ao=!1,this.fo=new Map,this.tn=!1,this.Sr=[],this.zr=!1}start(){this.zr=!0;const t=this.Sr;for(let e=0;e<t.length;++e)t[e]();this.Sr.length=0}onEnable(){this.$r&&!this.ao&&(this.do(),this.ao=!0),this.tn=!0}onDisable(){this.uo(),this.ao=!1,this.tn=!1}addCollider(t,e){if(!this.zr)return void this.Sr.push((()=>{this.addCollider(t,e)}));const i=this.fn.get(`${t}_${e}`);this.fn.set(`${t}_${e}`,void 0===i?1:i+1),this.$r&&this._r(t*this.gridCellWidth,e*this.gridCellHeight)}addColliderFromTwoDimensionalArray(t,e,i){if(this.zr)for(let s=0;s<t.length;s++)for(let h=0;h<t[s].length;h++)1===t[s][h]&&this.addCollider(h+e,t.length-(s+i));else this.Sr.push((()=>{this.addColliderFromTwoDimensionalArray(t,e,i)}))}removeCollider(t,e){const i=this.fn.get(`${t}_${e}`);void 0!==i&&(1===i?this.fn.delete(`${t}_${e}`):this.fn.set(`${t}_${e}`,i-1),this.$r&&this.co(t*this.gridCellWidth,e*this.gridCellHeight))}do(){this.fn.forEach(((t,e)=>{const[i,s]=e.split("_").map(Number);this._r(i*this.gridCellWidth,s*this.gridCellHeight)}))}uo(){this.fo.forEach((t=>{t.destroy()})),this.fo.clear()}_r(t,e){const i=new l.s;this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject("debug-image",new s.P(t,e,41e4)).withComponent(o._,(t=>{t.opacity=.5,t.pointerEvents=!1,t.imageWidth=this.gridCellWidth,t.imageHeight=this.gridCellHeight})).getGameObject(i)),this.fo.set(`${t}_${e}`,i.ref)}co(t,e){const i=this.fo.get(`${t}_${e}`);i&&(i.destroy(),this.fo.delete(`${t}_${e}`))}checkCollision(t,e,i,s){if(!this.tn)return!1;const h=this.transform.position;t-=h.x,e-=h.y;const r=Math.floor(t/this.gridCellWidth),l=Math.floor((t+i)/this.gridCellWidth),o=Math.floor(e/this.gridCellHeight),n=Math.floor((e+s)/this.gridCellHeight);for(let d=o;d<=n;d++)for(let t=r;t<=l;t++){const e=this.fn.get(`${t}_${d}`);if(void 0!==e&&e>0)return!0}return!1}get gridCellWidth(){return this.Th}set gridCellWidth(t){this.Th=t}get gridCellHeight(){return this.Ph}set gridCellHeight(t){this.Ph=t}get showCollider(){return this.$r}set showCollider(t){this.$r!==t&&(this.$r=t,this.$r&&!this.ao?(this.do(),this.ao=!0):(this.uo(),this.ao=!1))}get gridCenter(){const t=this.transform.position;return new h.F(t.x,t.y)}get gridCenterX(){return this.transform.position.x}get gridCenterY(){return this.transform.position.y}}},2138:(t,e,i)=>{i.d(e,{w:()=>r});var s=i(9387),h=i(9429);class r extends h.Y{constructor(){super(...arguments),this.tu=1,this.su=1,this.iu=!1,this.Za=null}renderInitialize(){var t;null===(t=this.Za)||void 0===t||t.call(this),this.htmlElement||(this.element=null)}updateCenterOffset(t){if(!this.css3DObject)return;let e,i;if(this.iu)if(this.css3DObject.element.parentElement){const t=this.css3DObject.element.style.display;this.css3DObject.element.style.display="",e=this.css3DObject.element.offsetWidth*this.viewScale,i=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=t}else{const t=this.css3DObject.element.style.display;this.css3DObject.element.style.display="";const s=this.css3DObject.element.style.transform;this.css3DObject.element.style.transform="translateX(1000000px)",document.body.appendChild(this.css3DObject.element),e=this.css3DObject.element.offsetWidth*this.viewScale,i=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=t,this.css3DObject.element.style.transform=s,document.body.removeChild(this.css3DObject.element)}else e=this.tu,i=this.su;this.css3DObject.position.set(e*this.centerOffset.x,i*this.centerOffset.y,0),t&&(s.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}updateViewScale(t){if(!this.css3DObject)return;const e=this.viewScale;this.iu?(this.css3DObject.scale.set(e,e,e),this.updateCenterOffset(!1)):(this.css3DObject.element.style.width=this.tu/this.viewScale+"px",this.css3DObject.element.style.height=this.su/this.viewScale+"px",this.css3DObject.scale.set(e,e,e)),t&&(s.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}get element(){return this.htmlElement}set element(t){const e=this.htmlElement=null!=t?t:document.createElement("div");this.readyToDraw?this.hu(e):this.Za=()=>this.hu(e)}hu(t){this.iu?(t.style.width="auto",t.style.height="auto"):(t.style.width=this.tu/this.viewScale+"px",t.style.height=this.su/this.viewScale+"px");const e=this.initializeBaseComponents(!0);s.w.updateRawObject3DWorldMatrixRecursively(e),this.transform.enqueueRenderAttachedObject3D(e)}get elementWidth(){if(this.iu){if(this.htmlElement){const t=this.htmlElement.style.display;this.htmlElement.style.display="";const e=this.htmlElement.offsetWidth*this.viewScale;return this.htmlElement.style.display=t,e}return 0}return this.tu}set elementWidth(t){this.iu||(this.tu=t,this.htmlElement&&(this.htmlElement.style.width=t/this.viewScale+"px"),this.updateCenterOffset(!0))}get elementHeight(){if(this.iu){if(this.htmlElement){const t=this.htmlElement.style.display;this.htmlElement.style.display="";const e=this.htmlElement.offsetHeight*this.viewScale;return this.htmlElement.style.display=t,e}return 0}return this.su}set elementHeight(t){this.iu||(this.su=t,this.htmlElement&&(this.htmlElement.style.height=t/this.viewScale+"px"),this.updateCenterOffset(!0))}get autoSize(){return this.iu}set autoSize(t){this.iu=t,this.htmlElement&&(t?(this.htmlElement.style.width="auto",this.htmlElement.style.height="auto"):(this.htmlElement.style.width=this.tu/this.viewScale+"px",this.htmlElement.style.height=this.su/this.viewScale+"px"))}}}}]);