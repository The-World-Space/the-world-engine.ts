"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[554],{5630:(t,e,s)=>{s.r(e),s.d(e,{assets:()=>b,contentTitle:()=>p,default:()=>y,frontMatter:()=>m,metadata:()=>g,toc:()=>v});var i=s(7462),a=(s(7294),s(3905)),n=s(719),r=s(708),l=s(4837),o=s(8788),h=s(1022),c=s(3674);class d extends c.w{constructor(){super(...arguments),this._rotationSpeed=1}update(){this.gameObject.transform.rotateZ(this._rotationSpeed*this.engine.time.deltaTime)}}class u extends r.A{run(){const t=this.instantiater;return this.sceneBuilder.withChild(t.buildGameObject("camera",new h.P(0,0,10)).withComponent(l.V)).withChild(t.buildGameObject("sprite1").withComponent(o._,(t=>{t.asyncSetImageFromPath("https://c.tenor.com/jJalYO9p0PAAAAAd/hatsune-miku-plush.gif"),t.imageWidth=6,t.imageHeight=6})).withComponent(d))}}const m={},p="Create Component",g={unversionedId:"getting-started/create-component",id:"getting-started/create-component",title:"Create Component",description:"Let's create our Component and add them to the GameObject",source:"@site/docs/1-getting-started/4-create-component.mdx",sourceDirName:"1-getting-started",slug:"/getting-started/create-component",permalink:"/the-world-engine.ts/build/docs/getting-started/create-component",draft:!1,editUrl:"https://github.com/The-World-Space/the-world-engine.ts/tree/main/docs/docusaurus/docs/1-getting-started/4-create-component.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Add Sprite",permalink:"/the-world-engine.ts/build/docs/getting-started/add-sprite"},next:{title:"Create Component: Sprite Animations",permalink:"/the-world-engine.ts/build/docs/getting-started/sprite-animations"}},b={},v=[{value:"Rotator Component",id:"rotator-component",level:2},{value:"Component Messages",id:"component-messages",level:2},{value:"Basic Messages",id:"basic-messages",level:3},{value:"Physics Messages",id:"physics-messages",level:3},{value:"Unsafe Messages",id:"unsafe-messages",level:3}],w={toc:v};function y(t){let{components:e,...s}=t;return(0,a.kt)("wrapper",(0,i.Z)({},w,s,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"create-component"},"Create Component"),(0,a.kt)("p",null,"Let's create our ",(0,a.kt)("inlineCode",{parentName:"p"},"Component")," and add them to the ",(0,a.kt)("inlineCode",{parentName:"p"},"GameObject")),(0,a.kt)("admonition",{title:"tip",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Component corresponds to Unity's ",(0,a.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/ScriptReference/MonoBehaviour.html"},"MonoBehaviour")," class.")),(0,a.kt)("h2",{id:"rotator-component"},"Rotator Component"),(0,a.kt)("p",null,"Let's make a component that rotates objects at a constant speed"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="./src/asset/script/Rotator.ts"',title:'"./src/asset/script/Rotator.ts"'},'import { Component } from "the-world-engine";\n\nexport class Rotator extends Component {\n    private readonly _rotationSpeed: number = 1;\n    \n    public update(): void { // update is called once per frame\n        this.gameObject.transform.rotateZ(\n            this._rotationSpeed * this.engine.time.deltaTime);\n    }\n}\n')),(0,a.kt)("p",null,"then we can add it to our ",(0,a.kt)("inlineCode",{parentName:"p"},"GameObject")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="./src/asset/Bootstrapper.ts"',title:'"./src/asset/Bootstrapper.ts"'},'//...\n.withChild(instantiater.buildGameObject("sprite1", new Vector3(0, 0, 0))\n    .withComponent(CssSpriteRenderer, c => {\n        c.asyncSetImageFromPath("https://c.tenor.com/jJalYO9p0PAAAAAd/hatsune-miku-plush.gif");\n        c.imageWidth = 6;\n        c.imageHeight = 6;\n    })\n    .withComponent(Rotator))\n//...\n')),(0,a.kt)(n.Z,{bootstrapper:u,ignoreEvents:!0,mdxType:"DocumentGame"}),(0,a.kt)("h2",{id:"component-messages"},"Component Messages"),(0,a.kt)("p",null,"the component messages are called when the gameObject meets certain conditions."),(0,a.kt)("p",null,"The list below is a list of the available messages."),(0,a.kt)("h3",{id:"basic-messages"},"Basic Messages"),(0,a.kt)("p",null,"These are the most commonly used messages."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"awake"),": awake is called when the script instance is being loaded."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"start"),": start is called on the frame when a script is enabled just before any of the update methods are called the first time."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"update"),": update is called every frame, if the Component is enabled."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onDestroy"),": Destroying the attached Component will result in the game or Scene receiving onDestroy."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onEnable"),": This function is called when the object becomes enabled and active."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onDisable"),": This function is called when the behaviour becomes disabled.")),(0,a.kt)("h3",{id:"physics-messages"},"Physics Messages"),(0,a.kt)("p",null,"These are the messages related to game engine built-in physics engine(box2d)."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onCollisionEnter2D"),": Sent when an incoming collider makes contact with this object's collider (2D physics only)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onCollisionExit2D"),": Sent when a collider on another object stops touching this object's collider (2D physics only)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onCollisionStay2D"),": Sent each frame where a collider on another object is touching this object's collider (2D physics only)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onTriggerEnter2D"),": Sent when another object enters a trigger collider attached to this object (2D physics only)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onTriggerExit2D"),": Sent when another object leaves a trigger collider attached to this object (2D physics only)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onTriggerStay2D"),": Sent each frame where another object is within a trigger collider attached to this object (2D physics only).")),(0,a.kt)("h3",{id:"unsafe-messages"},"Unsafe Messages"),(0,a.kt)("p",null,"If you add or remove GameObjects or Components within this messages, proper behavior is not guaranteed (performance reasons)."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"onWorldMatrixUpdated"),": This function is called when the world matrix is updated.")))}y.isMDXComponent=!0},3367:(t,e,s)=>{s.d(e,{Q:()=>i});class i{}i.defaultSpriteSrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA8SURBVDhP7dEhCgAxDADB+/k9Lh8rDCtq6yo6JrAhKt9s/k2JEjceNGlPiRI3HjRpT4kS7w81SpQ4PJhZxl3jEH3ZDWcAAAAASUVORK5CYII="},8788:(t,e,s)=>{s.d(e,{_:()=>l});var i=s(3367),a=s(4627),n=s(7161),r=s(3379);class l extends n.Y{constructor(){super(...arguments),this.Ga=0,this.Ha=0,this.Xa=!1,this.Ya=!1,this.$a=1,this.ka=()=>{this.htmlElement&&(this.htmlElement.style.filter=this.Ui.toString())},this.Ui=new r.c(this.ka),this.xa=null}renderInitialize(){this.xa?this.xa():this.asyncSetImageFromPath(i.Q.defaultSpriteSrc)}updateCenterOffset(t){this.css3DObject&&(this.css3DObject.position.set(this.Ga*this.centerOffset.x,this.Ha*this.centerOffset.y,0),t&&(a.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject)))}updateViewScale(t){if(!this.css3DObject)return;const e=this.viewScale,s=this.htmlElement;s.style.width=this.Ga/this.viewScale+"px",s.style.height=this.Ha/this.viewScale+"px";const i=this.Xa?-1:1,n=this.Ya?-1:1;this.css3DObject.scale.set(e*i,e*n,e),t&&(a.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}get image(){return this.htmlElement}asyncSetImageFromPath(t,e){var s;if(!this.readyToDraw)return void(this.xa=()=>this.asyncSetImageFromPath(t,e));const i=null!==(s=this.htmlElement)&&void 0!==s?s:new Image;i.src=t;const a=t=>{this.exists&&(i.removeEventListener("load",a),this.setImage(i),null==e||e())};i.addEventListener("load",a)}setImage(t){if(!t.complete)throw new Error(`Image {${t.src}} is not loaded.`);if(this.htmlElement=t,!this.readyToDraw)return void(this.xa=()=>this.setImage(t));t.alt=this.gameObject.name+"_sprite",t.style.imageRendering="pixelated",0===this.Ga&&(this.Ga=.1*t.naturalWidth),0===this.Ha&&(this.Ha=.1*t.naturalHeight),t.style.width=this.Ga/this.viewScale+"px",t.style.height=this.Ha/this.viewScale+"px",t.style.opacity=this.$a.toString(),t.style.filter=this.Ui.toString();const e=this.initializeBaseComponents(!1);a.w.updateRawObject3DWorldMatrixRecursively(e),this.transform.enqueueRenderAttachedObject3D(e)}get imageWidth(){return this.Ga}set imageWidth(t){this.Ga=t,this.htmlElement&&(this.htmlElement.style.width=t/this.viewScale+"px"),this.updateCenterOffset(!0)}get imageHeight(){return this.Ha}set imageHeight(t){this.Ha=t,this.htmlElement&&(this.htmlElement.style.height=t/this.viewScale+"px"),this.updateCenterOffset(!0)}get imageFlipX(){return this.Xa}set imageFlipX(t){this.Xa=t,this.css3DObject&&(this.Xa?0<this.css3DObject.scale.x&&(this.css3DObject.scale.x*=-1):this.css3DObject.scale.x<0&&(this.css3DObject.scale.x*=-1),a.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}get imageFlipY(){return this.Ya}set imageFlipY(t){this.Ya=t,this.css3DObject&&(this.Ya?0<this.css3DObject.scale.y&&(this.css3DObject.scale.y*=-1):this.css3DObject.scale.y<0&&(this.css3DObject.scale.y*=-1),a.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}get opacity(){return this.$a}set opacity(t){this.$a=t,this.htmlElement&&(this.htmlElement.style.opacity=this.$a.toString())}get filter(){return this.Ui}}},3379:(t,e,s)=>{s.d(e,{c:()=>n});var i=s(9760);class a{constructor(t=0,e=0,s=0,a=new i.I,n=null){this.tc=t,this.sc=e,this.ul=s,this.hc=(new i.I).copy(a),this.dl=n}get onChange(){return this.dl}set onChange(t){this.dl=t}get offsetX(){return this.tc}set offsetX(t){var e;this.tc=t,null===(e=this.dl)||void 0===e||e.call(this)}get offsetY(){return this.sc}set offsetY(t){var e;this.sc=t,null===(e=this.dl)||void 0===e||e.call(this)}get blur(){return this.ul}set blur(t){var e;this.ul=t,null===(e=this.dl)||void 0===e||e.call(this)}get color(){return this.hc}set color(t){var e;this.hc.copy(t),null===(e=this.dl)||void 0===e||e.call(this)}copy(t){var e;this.tc=t.offsetX,this.sc=t.offsetY,this.ul=t.blur,this.hc.copy(t.color),null===(e=this.dl)||void 0===e||e.call(this)}clone(){return new a(this.tc,this.sc,this.ul,this.hc.clone(),this.dl)}toString(){return"drop-shadow("+this.tc+"px "+this.sc+"px "+this.ul+"px "+this.hc.toString()+")"}}class n{constructor(t=null){this.ul=0,this.eu=1,this.ru=1,this.nu=null,this.ou=0,this.uu=0,this.au=0,this.lu=1,this.du=0,this.dl=t}get blur(){return this.ul}set blur(t){var e;this.ul=t,null===(e=this.dl)||void 0===e||e.call(this)}get brightness(){return this.eu}set brightness(t){var e;this.eu=t,null===(e=this.dl)||void 0===e||e.call(this)}get contrast(){return this.ru}set contrast(t){var e;this.ru=t,null===(e=this.dl)||void 0===e||e.call(this)}get dropShadow(){return this.nu}set dropShadow(t){t?(this.nu||(this.nu=new a(void 0,void 0,void 0,void 0,this.dl)),this.nu.copy(t)):this.nu&&(this.nu.onChange=null,this.nu=null)}get grayscale(){return this.ou}set grayscale(t){var e;this.ou=t,null===(e=this.dl)||void 0===e||e.call(this)}get hueRotate(){return this.uu}set hueRotate(t){var e;this.uu=t,null===(e=this.dl)||void 0===e||e.call(this)}get invert(){return this.au}set invert(t){var e;this.au=t,null===(e=this.dl)||void 0===e||e.call(this)}get saturate(){return this.lu}set saturate(t){var e;this.lu=t,null===(e=this.dl)||void 0===e||e.call(this)}get sepia(){return this.du}set sepia(t){var e;this.du=t,null===(e=this.dl)||void 0===e||e.call(this)}toString(){let t="";return 0!==this.ul&&(t+="blur("+this.ul+"px) "),1!==this.eu&&(t+="brightness("+this.eu+") "),1!==this.ru&&(t+="contrast("+this.ru+") "),0!==this.ou&&(t+="grayscale("+this.ou+") "),0!==this.uu&&(t+="hue-rotate("+this.uu+"deg) "),0!==this.au&&(t+="invert("+this.au+") "),1!==this.lu&&(t+="saturate("+this.lu+") "),0!==this.du&&(t+="sepia("+this.du+") "),this.nu&&(t+=this.nu.toString()),t}}}}]);