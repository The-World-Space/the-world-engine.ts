"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[300],{6259:(t,i,s)=>{s.d(i,{q:()=>n});var h=s(8172),e=s(1370),r=s(8095);class n extends h.w{constructor(){super(...arguments),this._disallowMultipleComponent=!0,this._requiredComponents=[e.T,r.h],this.Dh=null,this.Ah=null,this.kh=e.N.Down,this.jh=!1}awake(){this.Dh=this.gameObject.getComponent(e.T),this.Ah=this.gameObject.getComponent(r.h)}update(){const t=this.Dh.direction,i=this.Dh.isMoving;i?t===e.N.Up?this.jh===i&&this.kh===t||this.Ah.playAnimation("up_walk"):t===e.N.Down?this.jh===i&&this.kh===t||this.Ah.playAnimation("down_walk"):t===e.N.Left?this.jh===i&&this.kh===t||this.Ah.playAnimation("left_walk"):t===e.N.Right&&(this.jh===i&&this.kh===t||this.Ah.playAnimation("right_walk")):t===e.N.Up?this.jh===i&&this.kh===t||this.Ah.playAnimation("up_idle"):t===e.N.Down?this.jh===i&&this.kh===t||this.Ah.playAnimation("down_idle"):t===e.N.Left?this.jh===i&&this.kh===t||this.Ah.playAnimation("left_idle"):t===e.N.Right&&(this.jh===i&&this.kh===t||this.Ah.playAnimation("right_idle")),this.jh=i,this.kh=t}}},6896:(t,i,s)=>{s.d(i,{j:()=>a});var h=s(6120),e=s(5924);class r{constructor(t,i){this.nh=t,this.ah=i,this.eu=0,this.ru=0,this.ou=0,this.uu=null,this.lu=!0}calculateFCost(){this.ou=this.eu+this.ru}equals(t){return this.nh===t.nh&&this.ah===t.ah}get x(){return this.nh}get y(){return this.ah}get gCost(){return this.eu}set gCost(t){this.eu=t}get hCost(){return this.ru}set hCost(t){this.ru=t}get fCost(){return this.ou}set fCost(t){this.ou=t}get isWalkable(){return this.lu}set isWalkable(t){this.lu=t}get previousNode(){return this.uu}set previousNode(t){this.uu=t}}class n{constructor(t,i=.5,s=.5,h=1e3){var e;this.pr=null!==(e=null==t?void 0:t.slice())&&void 0!==e?e:[],this.wl=i,this.Nl=s,this.Pl=h}addCollideMap(t){this.pr.push(t)}removeCollideMap(t){const i=this.pr.indexOf(t);i>=0&&this.pr.splice(i,1)}removeAllCollideMaps(){this.pr.length=0}findPath(t,i){const s=new r(t.x,t.y),h=new r(i.x,i.y);if(this.Ar(s.x,s.y))return null;if(this.Ar(h.x,h.y))return null;const e=[],n=[];s.gCost=0,s.hCost=this._l(s,h),s.calculateFCost(),e.push(s);let o=0;for(;e.length>0&&o<this.Pl;){o++;const t=this.Cl(e);if(t.equals(h))return this.Ml(t);e.splice(e.indexOf(t),1),n.push(t);const i=this.gl(t);for(let s=0;s<i.length;++s){const r=i[s];if(void 0!==n.find((t=>t.equals(r))))continue;if(r.gCost=Number.MAX_VALUE,r.calculateFCost(),r.previousNode=null,this.Ar(r.x,r.y)){n.push(r);continue}const o=t.gCost+this._l(t,r);o<r.gCost&&(r.previousNode=t,r.gCost=o,r.hCost=this._l(r,h),r.calculateFCost(),void 0===e.find((t=>t.equals(r)))&&e.push(r))}}return null}gl(t){const i=[];return i.push(new r(t.x,t.y-1)),i.push(new r(t.x+1,t.y)),i.push(new r(t.x,t.y+1)),i.push(new r(t.x-1,t.y)),i}Ml(t){const i=[];let s=t;for(;s.previousNode;)i.push(new h.F(s.x,s.y)),s=s.previousNode;return i.push(new h.F(s.x,s.y)),i.reverse()}_l(t,i){return Math.abs(t.x-i.x)+Math.abs(t.y-i.y)}Cl(t){let i=t[0];for(let s=1;s<t.length;++s)t[s].fCost<i.fCost&&(i=t[s]);return i}Ar(t,i){const s=this.pr;for(let h=0;h<s.length;++h){const e=s[h];if(e.checkCollision(t*e.gridCellWidth+e.gridCenterX,i*e.gridCellHeight+e.gridCenterY,this.wl,this.Nl))return!0}return!1}}var o=s(1370);class a extends o.T{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.Mh=8,this.Ph=1,this.Th=1,this.pr=[],this.Ih=.5,this.yh=new h.F,this.Eh=new h.F,this.Gh=new h.F,this.Lh=new h.F,this.Rh=new e.n,this.Uh=new e.n,this.mr=null,this.gr=null,this.Hh=!1,this.Kh=null,this.Oh=0,this.Wh=null,this.Fh=new h.F,this.qh=!0,this.Bh=new h.F,this.Jh=new h.F,this.Nh=-1,this.Qh=new h.F,this.Xh=.3,this.vr=t=>{if(0!==t.button)return;this.Hh=!1;const i=this.engine.time.unscaledTime;i-this.Nh<this.Xh?this.Qh.equals(t.gridPosition)&&(this.Yh(t),this.Nh=-1):(this.Nh=i,this.Qh.copy(t.gridPosition))}}start(){this.gr=new n(this.pr,this.Th*this.Ih,this.Ph*this.Ih);const t=this.transform,i=t.position;i.x=this.yh.x+this.Lh.x*this.Th,i.y=this.yh.y+this.Lh.y*this.Ph,this.Eh.set(t.localPosition.x,t.localPosition.y);const s=t.parent;s&&this.Fh.set(s.position.x,s.position.y)}update(){var t;null===(t=this.Wh)||void 0===t||t.call(this),this.qh&&this.Zh(),this.$h(),this.Dr()}Zh(){if(this.isMoving)return void this.Mr();const t=this.engine.input.map,i=this.Eh;if(t.get("w")||t.get("ArrowUp")){if(this.direction=o.N.Up,this.Ar(i.x,i.y+this.Ph))return;this.Gh.set(i.x,i.y+this.Ph),this.Vr(),this.isMoving=!0}else if(t.get("s")||t.get("ArrowDown")){if(this.direction=o.N.Down,this.Ar(i.x,i.y-this.Ph))return;this.Gh.set(i.x,i.y-this.Ph),this.Vr(),this.isMoving=!0}else if(t.get("a")||t.get("ArrowLeft")){if(this.direction=o.N.Left,this.Ar(i.x-this.Th,i.y))return;this.Gh.set(i.x-this.Th,i.y),this.Vr(),this.isMoving=!0}else if(t.get("d")||t.get("ArrowRight")){if(this.direction=o.N.Right,this.Ar(i.x+this.Th,i.y))return;this.Gh.set(i.x+this.Th,i.y),this.Vr(),this.isMoving=!0}}Tr(t){const i=this.engine.input.map;return i.get("w")||i.get("ArrowUp")?(this.direction=o.N.Up,!this.Ar(t.x,t.y+this.Ph)&&(this.Gh.set(t.x,t.y+this.Ph),this.Vr(),!0)):i.get("s")||i.get("ArrowDown")?(this.direction=o.N.Down,!this.Ar(t.x,t.y-this.Ph)&&(this.Gh.set(t.x,t.y-this.Ph),this.Vr(),!0)):i.get("a")||i.get("ArrowLeft")?(this.direction=o.N.Left,!this.Ar(t.x-this.Th,t.y)&&(this.Gh.set(t.x-this.Th,t.y),this.Vr(),!0)):!(!i.get("d")&&!i.get("ArrowRight"))&&(this.direction=o.N.Right,!this.Ar(t.x+this.Th,t.y)&&(this.Gh.set(t.x+this.Th,t.y),this.Vr(),!0))}Vr(){this.Rh.invoke(Math.floor((this.Gh.x-this.yh.x)/this.Th),Math.floor((this.Gh.y-this.yh.y)/this.Ph))}Ir(){this.Uh.invoke(Math.floor((this.Eh.x-this.yh.x)/this.Th),Math.floor((this.Eh.y-this.yh.y)/this.Ph))}Mr(){const t=this.engine.input.map;(t.get("w")||t.get("ArrowUp")||t.get("s")||t.get("ArrowDown")||t.get("a")||t.get("ArrowLeft")||t.get("d")||t.get("ArrowRight"))&&(this.Hh=!1)}$h(){if(!this.Hh)return;const t=this.transform,i=this.Bh.set(t.localPosition.x,t.localPosition.y),s=this.Kh[this.Oh];if(s.distanceTo(i)<this.Mh*this.engine.time.deltaTime){if(this.Oh++,this.Oh>=this.Kh.length)return void(this.Hh=!1);this.Ir()}if(this.Ar(s.x,s.y))return void(this.Hh=!1);if(this.Gh.equals(this.Kh[this.Oh]))return;this.Gh.copy(this.Kh[this.Oh]),this.Vr();const h=this.Kh[this.Oh-1].x,e=this.Kh[this.Oh-1].y,r=this.Kh[this.Oh].x,n=this.Kh[this.Oh].y;e<n?this.direction=o.N.Up:e>n?this.direction=o.N.Down:h<r?this.direction=o.N.Right:h>r&&(this.direction=o.N.Left),this.isMoving=!0}Dr(){if(!this.isMoving)return;const t=this.transform,i=this.Bh.set(t.localPosition.x,t.localPosition.y);let s=i.distanceTo(this.Gh);const h=this.Mh*this.engine.time.deltaTime;s<h&&this.Tr(this.Gh)&&(s=i.distanceTo(this.Gh),this.Ir());const e=this.Jh.copy(this.Gh).sub(i).normalize();s<h?(this.isMoving=!1,this.Eh.copy(this.Gh),t.localPosition.x=this.Eh.x,t.localPosition.y=this.Eh.y,this.Ir()):(e.multiplyScalar(h),this.gameObject.transform.localPosition.x+=e.x,this.gameObject.transform.localPosition.y+=e.y)}Ar(t,i){t+=this.Fh.x,i+=this.Fh.y;const s=this.pr;for(let h=0;h<s.length;++h)if(s[h].checkCollision(t,i,this.Ih,this.Ih))return!0;return!1}Yh(t){if(this.Hh)return this.Hh=!1,void(this.Wh=()=>{this.tryStartPathfind(t.gridPosition)});this.Wh=()=>{this.tryStartPathfind(t.gridPosition)}}tryStartPathfind(t){if(this.Hh)return!1;this.Wh=null;const i=this.Kh=this.gr.findPath(this.positionInGrid,t);if(!i||i.length<=1)return!1;for(let s=0;s<i.length;++s){const t=i[s];t.x=t.x*this.Th+this.yh.x,t.y=t.y*this.Ph+this.yh.y}return this.Oh=1,this.isMoving=!0,this.Hh=!0,!0}cancelPathfind(){this.Hh=!1}get onMoveToTarget(){return this.Rh}get onMovedToTarget(){return this.Uh}teleport(t){this.isMoving=!1,this.Hh=!1,this.Eh.copy(t).multiplyScalar(this.Th).add(this.yh),this.Gh.copy(this.Eh),this.transform.localPosition.x=this.Eh.x,this.transform.localPosition.y=this.Eh.y,this.Vr(),this.Ir()}get speed(){return this.Mh}set speed(t){this.Mh=t}get gridCenter(){return this.yh}set gridCenter(t){this.yh.copy(t)}get gridCellHeight(){return this.Ph}set gridCellHeight(t){this.Ph=t}get gridCellWidth(){return this.Th}set gridCellWidth(t){this.Th=t}set initPosition(t){this.Lh.copy(t)}set gridPointer(t){this.mr&&this.mr.onPointerDown.removeListener(this.vr),this.mr=t,this.mr&&this.mr.onPointerDown.addListener(this.vr)}get gridPointer(){return this.mr}addCollideMap(t){var i;this.pr.push(t),null===(i=this.gr)||void 0===i||i.addCollideMap(t)}removeCollideMap(t){var i;const s=this.pr.indexOf(t);s>=0&&(this.pr.splice(s,1),null===(i=this.gr)||void 0===i||i.removeCollideMap(t))}removeAllCollideMaps(){var t;this.pr.length=0,null===(t=this.gr)||void 0===t||t.removeAllCollideMaps()}setGridInfoFromCollideMap(t){this.Th=t.gridCellWidth,this.Ph=t.gridCellHeight,this.yh.set(t.gridCenterX,t.gridCenterY)}get positionInGrid(){return new h.F(Math.floor((this.transform.localPosition.x-this.yh.x)/this.Th),Math.floor((this.transform.localPosition.y-this.yh.y)/this.Ph))}get receiveKeyboardInput(){return this.qh}set receiveKeyboardInput(t){this.qh=t}}},5365:(t,i,s)=>{s.d(i,{K:()=>a});var h=s(6120),e=s(4532),r=s(9542),n=s(8172),o=s(2684);class a extends n.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[o.V],this.Ur=null,this.kr=new h.F,this.Or=20,this.br=1,this.Lr=!1,this.jr=!1,this.yr=6,this.qr=new e.P}start(){if(this.Ur){const t=this.qr.copy(this.Ur.transform.position);t.z+=this.Or,this.transform.position.copy(t)}}update(){const t=this.qr.copy(this.Ur.transform.position);t.z+=this.Or,t.x+=this.kr.x,t.y+=this.kr.y;const i=this.transform;if(this.jr){const s=this.engine.time.deltaTime,h=this.yr,e=r.u1(i.position.x,t.x,h,s),n=r.u1(i.position.y,t.y,h,s),o=r.u1(i.position.z,t.z,h,s);i.position.set(e,n,o)}else i.position.copy(t);this.Lr&&(i.localPosition.x=Math.round(i.localPosition.x/this.br)*this.br,i.localPosition.y=Math.round(i.localPosition.y/this.br)*this.br)}setTrackTarget(t){this.Ur=t}get targetOffset(){return this.kr}set targetOffset(t){this.kr.copy(t)}get cameraDistanceOffset(){return this.Or}set cameraDistanceOffset(t){this.Or=t}get pixelPerfectUnit(){return this.br}set pixelPerfectUnit(t){this.br=t}get pixelPerfect(){return this.Lr}set pixelPerfect(t){this.Lr=t}get smoothTrack(){return this.jr}set smoothTrack(t){this.jr=t}get smoothLambda(){return this.yr}set smoothLambda(t){this.yr=t}}},3276:(t,i,s)=>{s.d(i,{V:()=>r});var h=s(8172),e=s(6896);class r extends h.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[e.j],this.Ih=.5,this.eo=null,this.ho=[],this.lo=(t,i)=>{const s=this.eo.gridCenter,h=this.eo.gridCellWidth,e=this.eo.gridCellHeight,r=s.x+t*h,n=s.y+i*e,o=this.ho;for(let a=0;a<o.length;++a)o[a].tryInvokeEvent(r,n,this.Ih,this.Ih,this.gameObject)}}awake(){this.eo=this.gameObject.getComponent(e.j),this.eo.onMoveToTarget.addListener(this.lo)}onDestroy(){this.eo.onMoveToTarget.removeListener(this.lo)}addGridEventMap(t){this.ho.push(t)}removeGridEventMap(t){const i=this.ho.indexOf(t);i>=0&&this.ho.splice(i,1)}removeAllGridEventMap(){this.ho.length=0}get collideSize(){return this.Ih}set collideSize(t){this.Ih=t}}},590:(t,i,s)=>{s.d(i,{F:()=>u});var h=s(9384),e=s(6120),r=s(4532),n=s(8172),o=s(6324),a=s(1439),l=s(4669);class c extends l.N{constructor(){super(...arguments),this.fn=new Map,this.tn=!1}onEnable(){super.onEnable(),this.tn=!0}onDisable(){super.onDisable(),this.tn=!1}drawTile(t,i,s,h){super.drawTile(t,i,s,h);const e=Math.ceil(t-this.columnCount/2),r=Math.ceil(this.rowCount-i-this.rowCount/2)-1;this.fn.set(`${e}_${r}`,!0)}drawTileFromTwoDimensionalArray(t,i,s){super.drawTileFromTwoDimensionalArray(t,i,s);for(let h=0;h<t.length;h++)for(let e=0;e<t[h].length;e++)if(null!==t[h][e]){const t=Math.ceil(this.transform.localPosition.x/this.gridCellWidth+(e+i)-this.columnCount/2),r=Math.ceil(this.transform.localPosition.y/this.gridCellHeight+(this.rowCount-(h+s))-this.rowCount/2)-1;this.fn.set(`${t}_${r}`,!0)}}clearTile(t,i){super.clearTile(t,i);const s=Math.ceil(t-this.columnCount/2),h=Math.ceil(this.rowCount-i-this.rowCount/2)-1;this.fn.delete(`${s}_${h}`)}addCollider(t,i){const s=Math.ceil(t-this.columnCount/2),h=Math.ceil(this.rowCount-i-this.rowCount/2)-1;this.fn.set(`${s}_${h}`,!0)}checkCollision(t,i,s,h){if(!this.tn)return!1;const e=this.transform.position;t-=e.x,i-=e.y,this.columnCount%2==0&&(t-=this.gridCellWidth),this.rowCount%2==0&&(i-=this.gridCellHeight),this.rowCount%2==0&&(i+=this.gridCellHeight/2),this.columnCount%2==0&&(t+=this.gridCellWidth/2);const r=Math.floor(t/this.gridCellWidth),n=Math.floor((t+s)/this.gridCellWidth),o=Math.floor(i/this.gridCellHeight),a=Math.floor((i+h)/this.gridCellHeight);for(let l=o;l<=a;l++)for(let t=r;t<=n;t++)if(!0===this.fn.get(`${t}_${l}`))return!0;return!1}}class u extends n.w{constructor(){super(...arguments),this.Fr=new Map,this.Xr=new Map,this.Yr=16,this.Kr=1,this.Nr=1,this.Br=16,this.Gr=16,this.Jr=1.001,this.Qr=null,this.Zr=!0,this.tn=!1,this.sn=.1,this.en=o.r.Pixelated,this.hn=()=>{this.Fr.forEach(((t,i)=>{t.filter.copy(this.aa)}))},this.aa=new a.c(this.hn),this.Sr=[],this.zr=!1}start(){this.zr=!0;const t=this.Sr;for(let i=0;i<t.length;++i)t[i]();t.length=0}onEnable(){this.tn=!0}onDisable(){this.tn=!1}rn(){this.Fr.forEach(((t,i)=>{const s=this.nn(i)*this.Yr*this.Kr,h=this.on(i)*this.Yr*this.Nr;t.gameObject.transform.localPosition.set(s,h,0)}))}nn(t){return parseInt(t.substring(0,t.indexOf("_")))}on(t){return parseInt(t.substring(t.indexOf("_")+1))}ln(t,i){return`${t}_${i}`}cn(t,i,s,h){const r=s-t*this.Yr+this.Yr/2,n=h-i*this.Yr+this.Yr/2;return new e.F(r,n)}an(t,i){const s=this.ln(t,i);let e=this.Fr.get(s);if(void 0===e){const n=new h.s;this.gameObject.addChildFromBuilder(this.engine.instantiater.buildGameObject(`css_tilemap_renderer_${t}_${i}`,new r.P(t*this.Yr*this.Kr,i*this.Yr*this.Nr,0),void 0,(new r.P).setScalar(this.Jr)).withComponent(c,(t=>{this.Qr&&(t.imageSources=this.Qr),t.gridCellWidth=this.Kr,t.gridCellHeight=this.Nr,t.tileResolutionX=this.Br,t.tileResolutionY=this.Gr,t.rowCount=this.Yr,t.columnCount=this.Yr,t.pointerEvents=this.Zr,t.viewScale=this.sn,t.filter.copy(this.aa)})).getComponent(c,n)),e=n.ref,this.Fr.set(s,e)}return e}un(t,i){const s=this.ln(t,i),h=this.Fr.get(s);return void 0===h?null:h}drawTile(t,i,s,h){if(!this.zr)return void this.Sr.push((()=>{this.drawTile(t,i,s,h)}));const e=Math.floor((t+this.Yr/2)/this.Yr),r=Math.floor((i+this.Yr/2)/this.Yr),n=this.an(e,r),o=this.cn(e,r,t,i),a=this.chunkSize%2==0?0:-.5,l=this.chunkSize%2==0?0:.5,c=o.x+a,u=this.Yr-o.y-1+l;n.drawTile(c,u,s,h);const d=this.ln(e,r),g=this.Xr.get(d);void 0===g?this.Xr.set(d,new Set([`${c}_${u}`])):g.add(`${c}_${u}`)}drawTileFromTwoDimensionalArray(t,i,s){if(this.zr)for(let h=0;h<t.length;h++)for(let e=0;e<t[h].length;e++)null!==t[h][e]&&this.drawTile(e+i,t.length-h+s-1,t[h][e].i,t[h][e].a);else this.Sr.push((()=>{this.drawTileFromTwoDimensionalArray(t,i,s)}))}clearTile(t,i){if(!this.zr)return void this.Sr.push((()=>{this.clearTile(t,i)}));const s=Math.floor((t+this.Yr/2)/this.Yr),h=Math.floor((i+this.Yr/2)/this.Yr),e=this.un(s,h);if(null===e)return;const r=this.cn(s,h,t,i),n=this.chunkSize%2==0?0:-.5,o=this.chunkSize%2==0?0:.5;e.clearTile(r.x+n,this.Yr-r.y-1+o)}addCollider(t,i){if(!this.zr)return void this.Sr.push((()=>{this.addCollider(t,i)}));const s=Math.floor((t+this.Yr/2)/this.Yr),h=Math.floor((i+this.Yr/2)/this.Yr),e=this.an(s,h),r=this.cn(s,h,t,i),n=this.chunkSize%2==0?0:-.5,o=this.chunkSize%2==0?0:.5;e.addCollider(r.x+n,this.Yr-r.y-1+o)}checkCollision(t,i,s,h){if(!this.tn)return!1;const e=this.transform.position,r=Math.floor(((t-e.x)/this.Kr+this.Yr/2)/this.Yr),n=Math.floor(((i-e.y)/this.Nr+this.Yr/2)/this.Yr),o=this.ln(r,n),a=this.Fr.get(o);return void 0!==a&&a.checkCollision(t,i,s,h)}get chunkSize(){return this.Yr}set chunkSize(t){this.Yr=t,this.rn(),this.Fr.forEach(((t,i)=>{t.rowCount=this.Yr,t.columnCount=this.Yr}))}set imageSources(t){this.zr?this.Qr=t:this.Sr.push((()=>{this.imageSources=t}))}get pointerEvents(){return this.Zr}set pointerEvents(t){this.Zr=t,this.Fr.forEach(((i,s)=>{i.pointerEvents=t}))}get gridCellWidth(){return this.Kr}set gridCellWidth(t){this.Kr!==t&&(this.Kr=t,this.rn(),this.Fr.forEach(((t,i)=>{t.gridCellWidth=this.Kr})))}get gridCellHeight(){return this.Nr}set gridCellHeight(t){this.Nr!==t&&(this.Nr=t,this.rn(),this.Fr.forEach(((t,i)=>{t.gridCellHeight=this.Nr})))}get tileResolutionX(){return this.Br}set tileResolutionX(t){this.Br!==t&&(this.Br=t,this.Fr.forEach(((t,i)=>{t.tileResolutionX=this.Br})))}get tileResolutionY(){return this.Gr}set tileResolutionY(t){this.Gr!==t&&(this.Gr=t,this.Fr.forEach(((t,i)=>{t.tileResolutionY=this.Gr})))}get tilemapScale(){return this.Jr}set tilemapScale(t){this.Jr!==t&&(this.Jr=t,this.Fr.forEach(((t,i)=>{t.gameObject.transform.localScale.setScalar(this.Jr)})))}get gridCenter(){const t=this.transform.position,i=this.Yr%2==1?0:this.Kr/2,s=this.Yr%2==1?0:this.Nr/2;return new e.F(t.x+i,t.y+s)}get gridCenterX(){const t=this.transform.position,i=this.Yr%2==1?0:this.Kr/2;return t.x+i}get gridCenterY(){const t=this.transform.position,i=this.Yr%2==1?0:this.Nr/2;return t.y+i}get viewScale(){return this.sn}set viewScale(t){this.sn=t,this.Fr.forEach(((t,i)=>{t.viewScale=this.sn}))}get filter(){return this.aa}get imageRenderingMode(){return this.en}set imageRenderingMode(t){this.en=t,this.Fr.forEach(((i,s)=>{i.imageRenderingMode=t}))}}},1370:(t,i,s)=>{s.d(i,{N:()=>h,T:()=>n});var h,e,r=s(8172);(e=h||(h={}))[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right";class n extends r.w{constructor(){super(...arguments),this.Do=h.Down,this.xo=!1}get direction(){return this.Do}set direction(t){this.Do=t}get isMoving(){return this.xo}set isMoving(t){this.xo=t}}},8095:(t,i,s)=>{s.d(i,{h:()=>r});var h=s(8172),e=s(1492);class r extends h.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[e.$],this.tl=null,this.Yn={},this.Zn=null,this.oa=null,this.ma=0,this.ua=!1,this.fa=2,this.pa=0,this.da=null}awake(){this.tl=this.gameObject.getComponent(e.$),null!==this.da&&(this.playAnimation(this.da),this.da=null)}update(){null!==this.tl&&this.ua&&(this.pa+=this.engine.time.deltaTime,this.pa>=this.fa&&(this.pa=0,this.ma++,this.ma>=this.oa.length&&(this.ma=0),this.tl.imageIndex=this.oa[this.ma]))}playAnimation(t){null!==this.tl?this.Zn!==t&&(this.Zn=t,this.oa=this.Yn[t],this.ma=0,this.tl.imageIndex=this.Yn[t][0],this.ua=!0):this.da=t}stopAnimation(){this.ua=!1,this.da=null}addAnimation(t,i){0!==i.length?this.Yn[t]=i:console.warn(`Animation "${t}" has no frames.`)}get frameDuration(){return this.fa}set frameDuration(t){this.fa=t}}},1492:(t,i,s)=>{s.d(i,{$:()=>l});var h,e,r=s(4391),n=s(9387),o=s(9429),a=s(6324);(e=h||(h={}))[e.ObjectFit=0]="ObjectFit",e[e.ClipPath=1]="ClipPath";class l extends o.Y{constructor(){super(...arguments),this.Ga=h.ObjectFit,this.Ha=0,this.Xa=0,this.Ya=!1,this.Ea=!1,this.$a=1,this.en=a.r.Pixelated,this.wa=1,this.Aa=1,this.Ba=0,this.Ja=0,this.Ka=0,this.Za=null}renderInitialize(){this.Za?this.Za():this.asyncSetImageFromPath(r.Q.defaultSpriteSrc,1,1)}updateCenterOffset(t){if(this.css3DObject)if(this.Ga===h.ObjectFit)this.css3DObject.position.set(this.Ha*this.centerOffset.x,this.Xa*this.centerOffset.y,0),t&&(n.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject));else{const i=this.Ba%this.wa,s=Math.floor(this.Ba/this.wa),h=this.Ya?-(this.Ha*this.wa/2-this.Ha/2)+i*this.Ha:this.Ha*this.wa/2-this.Ha/2-i*this.Ha,e=this.Ea?this.Xa*this.Aa/2-this.Xa/2-s*this.Xa:-(this.Xa*this.Aa/2-this.Xa/2)+s*this.Xa;this.css3DObject.position.set(this.Ha*this.centerOffset.x+h,this.Xa*this.centerOffset.y+e,0),t&&(n.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}}updateViewScale(t){if(this.css3DObject)if(this.Ga===h.ObjectFit){const i=this.viewScale,s=this.Ya?-1:1,h=this.Ea?-1:1;this.css3DObject.scale.set(this.Ha/this.Ja*i*s,this.Xa/this.Ka*i*h,1),t&&(n.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}else{const i=this.viewScale,s=this.htmlElement;s.style.width=this.Ha*this.wa/i+"px",s.style.height=this.Xa*this.Aa/i+"px";const h=this.Ya?-1:1,e=this.Ea?-1:1;this.css3DObject.scale.set(i*h,i*e,i),t&&(n.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}}La(){if(this.htmlElement)if(this.Ga===h.ObjectFit){const t=-this.Ba%this.wa*this.Ja,i=-Math.floor(this.Ba/this.wa)*this.Ka;this.htmlElement.style.objectPosition=t+"px "+i+"px"}else{const t=Math.floor(this.Ba/this.wa),i=this.wa-this.Ba%this.wa-1;this.htmlElement.style.clipPath="inset("+100/this.Aa*t+"% "+100/this.wa*i+"% "+(100-(100/this.Aa*t+100/this.Aa))+"% "+(100-(100/this.wa*i+100/this.wa))+"%)"}}get image(){return this.htmlElement}asyncSetImageFromPath(t,i,s,h){var e;if(!this.readyToDraw)return void(this.Za=()=>this.asyncSetImageFromPath(t,i,s,h));const r=null!==(e=this.htmlElement)&&void 0!==e?e:new Image;r.src=t;const n=t=>{this.exists&&(r.removeEventListener("load",n),this.setImage(r,i,s),null==h||h())};r.addEventListener("load",n)}setImage(t,i,s){if(!t.complete)throw new Error(`Image {${t.src}} is not loaded.`);this.wa=i,this.Aa=s,this.htmlElement=t,t.alt=this.gameObject.name+"_sprite_atlas",t.style.imageRendering=this.en,t.style.opacity=this.$a.toString(),this.Ga===h.ObjectFit?(1!==this.viewScale&&console.warn("CssSpriteAtlas.viewScale is not supported in CssSpriteAtlasRenderMode.ObjectFit, for supressing this warning set viewScale to 1."),this.Ja=t.naturalWidth/this.wa,this.Ka=t.naturalHeight/this.Aa,0===this.Ha&&(this.Ha=.1*this.Ja),0===this.Xa&&(this.Xa=.1*this.Ka),t.style.width=this.Ja+"px",t.style.height=this.Ka+"px",t.style.objectFit="none"):(0===this.Ha&&(this.Ha=t.naturalWidth/this.wa*.1),0===this.Xa&&(this.Xa=t.naturalHeight/this.Aa*.1),t.style.width=this.Ha*this.wa/this.viewScale+"px",t.style.height=this.Xa*this.Aa/this.viewScale+"px");const e=this.initializeBaseComponents(!1);this.La(),n.w.updateRawObject3DWorldMatrixRecursively(e),this.transform.enqueueRenderAttachedObject3D(e)}get renderMode(){return this.Ga}set renderMode(t){if(this.Ga!==t&&(this.Ga=t,this.htmlElement)){const t=this.htmlElement;this.Ga===h.ObjectFit?(1!==this.viewScale&&console.warn("CssSpriteAtlas.viewScale is not supported in CssSpriteAtlasRenderMode.ObjectFit"),t.style.clipPath="",this.Ja=t.naturalWidth/this.wa,this.Ka=t.naturalHeight/this.Aa,0===this.Ha&&(this.Ha=this.Ja),0===this.Xa&&(this.Xa=this.Ka),t.style.width=this.Ja+"px",t.style.height=this.Ka+"px",t.style.objectFit="none"):(t.style.objectFit="",t.style.objectPosition="",0===this.Ha&&(this.Ha=t.naturalWidth/this.wa),0===this.Xa&&(this.Xa=t.naturalHeight/this.Aa),t.style.width=this.Ha*this.wa/this.viewScale+"px",t.style.height=this.Xa*this.Aa/this.viewScale+"px"),this.updateViewScale(!1),this.updateCenterOffset(!1),this.La(),n.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject)}}get imageIndex(){return this.Ba}set imageIndex(t){this.Ba=t,this.La(),this.Ga===h.ClipPath&&this.updateCenterOffset(!0)}get columnCount(){return this.wa}get rowCount(){return this.Aa}get imageWidth(){return this.Ha}set imageWidth(t){this.Ha=t,this.Ga===h.ObjectFit?this.css3DObject&&(this.css3DObject.scale.x=this.Ha/this.Ja*this.viewScale,this.css3DObject.scale.x*=this.Ya?-1:1):this.htmlElement&&(this.htmlElement.style.width=t*this.wa/this.viewScale+"px"),this.updateCenterOffset(!0)}get imageHeight(){return this.Xa}set imageHeight(t){this.Xa=t,this.Ga===h.ObjectFit?this.css3DObject&&(this.css3DObject.scale.y=this.Xa/this.Ka*this.viewScale,this.css3DObject.scale.y*=this.Ea?-1:1):this.htmlElement&&(this.htmlElement.style.height=t*this.Aa/this.viewScale+"px"),this.updateCenterOffset(!0)}get imageFlipX(){return this.Ya}set imageFlipX(t){this.Ya=t,this.css3DObject&&(this.Ya?0<this.css3DObject.scale.x&&(this.css3DObject.scale.x*=-1):this.css3DObject.scale.x<0&&(this.css3DObject.scale.x*=-1),this.Ga===h.ObjectFit?(n.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject)):(this.La(),this.updateCenterOffset(!0)))}get imageFlipY(){return this.Ea}set imageFlipY(t){this.Ea=t,this.css3DObject&&(this.Ea?0<this.css3DObject.scale.y&&(this.css3DObject.scale.y*=-1):this.css3DObject.scale.y<0&&(this.css3DObject.scale.y*=-1),this.Ga===h.ObjectFit?(n.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject)):(this.La(),this.updateCenterOffset(!0)))}get opacity(){return this.$a}set opacity(t){this.$a=t,this.htmlElement&&(this.htmlElement.style.opacity=this.$a.toString())}get imageRenderingMode(){return this.en}set imageRenderingMode(t){this.en=t,this.htmlElement&&(this.htmlElement.style.imageRendering=this.en)}}},957:(t,i,s)=>{s.d(i,{$:()=>e});var h=s(1169);class e extends h.C{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.qa=0,this.Ua=!0}start(){this.update(),this.Ua&&this.destroy()}update(){const t=this.transform.position;t.z=-t.y+this.qa}get offset(){return this.qa}set offset(t){this.qa=t}get runOnce(){return this.Ua}set runOnce(t){this.Ua=t}}}}]);