"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[121],{7947:(e,t,i)=>{i.d(t,{z:()=>w});var n=i(546),a=i(7888),s=i(4483),r=i(4286),l=i(4394),o=i(9672),d=i(4149),h=i(9020);const m=i.p+"assets/images/char_spritesheet-6b6a6acd99180f91c1aad1383dddc3cd.png";var c=i(3674),p=i(274);class u extends c.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[p.T],this._collideSize=.5,this._tileWidth=1,this._tileHeight=1,this._gridEventMaps=[],this._directable=null,this.onKeyDown=e=>{if("e"!==e.key.toLowerCase())return;const t=this.gameObject.transform.position;let i,n;switch(this._directable.direction){case p.N.Up:i=0,n=this._tileHeight;break;case p.N.Down:i=0,n=-this._tileHeight;break;case p.N.Left:i=-this._tileWidth,n=0;break;case p.N.Right:i=this._tileWidth,n=0}for(let a=0;a<this._gridEventMaps.length;a++){this._gridEventMaps[a].tryInvokeEvent(t.x+i,t.y+n,this._collideSize,this._collideSize,this.gameObject)}}}awake(){this._directable=this.gameObject.getComponent(p.T)}onEnable(){this.engine.input.onKeyDown.addListener(this.onKeyDown)}onDisable(){this.engine.input.onKeyDown.removeListener(this.onKeyDown)}addGridEventMap(e){this._gridEventMaps.push(e)}}class w extends n.W{constructor(){super(...arguments),this._collideMaps=[],this._gridPointer=new a.s,this._gridPosition=new a.s,this._gridEventMap=new a.s}withCollideMap(e){return this._collideMaps.push(e),this}withGridPointer(e){return this._gridPointer=e,this}withGridPosition(e){return this._gridPosition=e,this}withGridEventMap(e){return this._gridEventMap=e,this}make(){return this.gameObjectBuilder.withComponent(s.$,(e=>{e.asyncSetImageFromPath(m,26,23),e.imageWidth=1,e.imageHeight=1,e.viewScale=1,e.filter.brightness=1.2})).withComponent(r.h,(e=>{e.addAnimation("down_walk",[27,28,29,30,31,32]),e.addAnimation("left_walk",[53,54,55,56,57,58]),e.addAnimation("right_walk",[79,80,81,82,83,84]),e.addAnimation("up_walk",[105,106,107,108,109,110]),e.addAnimation("down_idle",[34,35,36,37,38,39]),e.addAnimation("left_idle",[60,61,62,63,64,65]),e.addAnimation("right_idle",[86,87,88,89,90,91]),e.addAnimation("up_idle",[112,113,114,115,116,117]),e.addAnimation("down_hit",[41,42,43]),e.addAnimation("left_hit",[67,68,69]),e.addAnimation("right_hit",[93,94,95]),e.addAnimation("up_hit",[119,120,121]),e.addAnimation("down_push",[45,46,47,48,49,50]),e.addAnimation("left_push",[71,72,73,74,75,76]),e.addAnimation("right_push",[97,98,99,100,101,102]),e.addAnimation("up_push",[123,124,125,126,127,128]),e.addAnimation("down_climb",[157,158,159,160,161,162]),e.addAnimation("up_climb",[183,184,185,186,187,188]),e.addAnimation("down_shield_hit",[168,169,170,171,172]),e.addAnimation("left_shield_hit",[194,195,196,197,198]),e.addAnimation("right_shield_hit",[220,221,222,223,224]),e.addAnimation("up_shield_hit",[246,247,248,249,250]),e.addAnimation("down_shield",[174]),e.addAnimation("left_shield",[200]),e.addAnimation("right_shield",[226]),e.addAnimation("up_shield",[252]),e.addAnimation("death_all_air",[235,236,237,238,239,240,241,242,243,244]),e.addAnimation("falling_all_air",[287,288,289,290,291,292]),e.frameDuration=.1,e.playAnimation("down_idle")})).withComponent(l.j,(e=>{e.speed=4;for(const t of this._collideMaps)t.ref&&e.addCollideMap(t.ref);e.gridPointer=this._gridPointer.ref,this._gridPosition.ref&&(e.initPosition=this._gridPosition.ref)})).withComponent(o.q).withComponent(d.V,(e=>{this._gridEventMap.ref&&e.addGridEventMap(this._gridEventMap.ref)})).withComponent(u,(e=>{this._gridEventMap.ref&&e.addGridEventMap(this._gridEventMap.ref)})).withComponent(h.$,(e=>{e.runOnce=!1,e.offset=.5}))}}},6327:(e,t,i)=>{i.d(t,{l:()=>d});var n=i(546),a=i(251),s=i(7111),r=i(983),l=i(6868),o=i(9484);class d extends n.W{constructor(){super(...arguments),this._planeSize=null}withPlaneSize(e){return this._planeSize=e,this}make(){return this.gameObjectBuilder.withComponent(a.N,(e=>{e.offset=-100})).withComponent(s.n,(e=>{e.chunkSize=15,e.filter.brightness=1.5,e.tileResolutionX=16,e.tileResolutionY=16,r.E.loadImageFromPath(o.Z).then((t=>{var i,n;if(!e.exists)return;e.imageSources=[new l.I(t,18,13)];const a={i:0,a:24},s=null!=(i=null==(n=this._planeSize)?void 0:n.ref)?i:51,r=[];for(let e=0;e<s;e++){r[e]=[];for(let t=0;t<s;t++)r[e][t]=a}const o=Math.floor(s/2);e.drawTileFromTwoDimensionalArray(r,-o,-o)}))}))}}},2440:(e,t,i)=>{i.d(t,{Y:()=>c});var n=i(546),a=i(7888),s=i(251),r=i(5216),l=i(983),o=i(6868),d=i(291),h=i(7111),m=i(9484);class c extends n.W{constructor(){super(...arguments),this._collideTilemap=new a.s}getCollideTilemap(e){return this._collideTilemap=e,this}make(){return this.gameObjectBuilder.withComponent(s.N,(e=>{e.offset=-98})).withComponent(r.F,(e=>{e.chunkSize=15,e.filter.brightness=1.5,e.tileResolutionX=16,e.tileResolutionY=16,l.E.loadImageFromPath(m.Z).then((t=>{if(!e.exists)return;function i(e){return{i:0,a:e}}e.imageSources=[new o.I(t,18,13)];const n={o:()=>i(93),O:()=>i(94),"#":()=>i(61),"@":()=>i(75),$:()=>i(76),"*":()=>i(58),"^":()=>i(59)," ":()=>null};e.drawTileFromTwoDimensionalArray(d.d.map(["              ","   $          ","    #         ","              ","              "],n),-3,4),e.drawTileFromTwoDimensionalArray(d.d.map(["             ","          o  ","         @   ","     #       ","             ","             ","O            "],n),-7,-8)}))})).withComponent(h.n,(e=>{e.chunkSize=15,e.filter.brightness=1.5,e.tileResolutionX=16,e.tileResolutionY=16,l.E.loadImageFromPath(m.Z).then((t=>{if(!e.exists)return;function i(e){return{i:0,a:e}}e.imageSources=[new o.I(t,18,13)];const n={"\u3161":()=>i(47),"\u3163":()=>i(46),"\u3155":()=>i(11),"\u3151":()=>i(29),"\u314f":()=>i(44),"\u3153":()=>i(45),"\u3157":()=>i(62),"\u315c":()=>i(63),"\u3131":()=>i(8),"\u3134":()=>i(26),"\u3132":()=>i(9),"\u3139":()=>i(27),"\u315b":()=>i(28),"\u3160":()=>i(10),"\u3147":()=>null};e.drawTileFromTwoDimensionalArray(d.d.map(["\u3160","\u3134\u3131","\u3147\u314f\u3161\u3161\u3161\u3161\u3161\u3155","\u3147\u315b"],n),-3,4),e.drawTileFromTwoDimensionalArray(d.d.map(["\u3147\u3147\u3147\u3147\u3147\u3147\u3160","\u3147\u3147\u3147\u3147\u3147\u3147\u3163","\u3151\u3161\u3161\u3161\u3161\u3161\u3157\u3161\u315c\u3161\u3161\u3161\u3161\u3161\u3161\u3155","\u3147\u3147\u3147\u3147\u3147\u3147\u3147\u3147\u315b"],n),-8,-1),e.drawTileFromTwoDimensionalArray(d.d.map(["\u3147\u3147\u3147\u3147\u3147\u3160","\u3147\u3147\u3147\u3147\u3147\u3163","\u3147\u3147\u3147\u3147\u3147\u3163","\u3132\u3161\u3161\u3161\u3161\u3139","\u3163\u3147\u3147\u3147\u3147\u3147","\u315b\u3147\u3147\u3147\u3147\u3147"],n),-5,-8),e.drawTileFromTwoDimensionalArray(d.d.map(["\u3160","\u3163","\u3163","\u3163","\u3163","\u315b\u3147\u3147\u3147\u3147\u3147"],n),-5,-15);const a={"^":()=>i(56),"%":()=>i(57),"*":()=>i(72),"&":()=>i(73),"!":()=>i(90),"~":()=>i(91),o:()=>i(74),O:()=>i(92)," ":()=>null};e.drawTileFromTwoDimensionalArray(d.d.map(["     ^","","^ %  ~*"],a),3,4),e.drawTileFromTwoDimensionalArray(d.d.map(["O%    ^"," ^","","^  %"],a),1,-1),e.drawTileFromTwoDimensionalArray(d.d.map(["%     ^"," ","      *~","    % !~","     !**","o   !**~"],a),-2,-8)}))})).getComponent(r.F,this._collideTilemap)}}},1900:(e,t,i)=>{i.d(t,{P:()=>C});var n=i(546),a=i(7888),s=i(251),r=i(5216),l=i(983),o=i(6868),d=i(7111),h=i(9484),m=i(6120);const c={i:0,a:4},p={i:0,a:5},u={i:0,a:7},w={i:0,a:22},g={i:0,a:25},b={i:0,a:40},f={i:0,a:41},y={i:0,a:43};class k{static make(e,t,i,n){const a=Array(t);for(let s=0;s<t;s++){a[s]=Array(e);for(let t=0;t<e;t++)a[s][t]=null}a[0][0]=c;for(let s=1;s<e-1;s++)a[0][s]=p;a[0][e-1]=u;for(let s=1;s<t-1;s++)a[s][0]=w,a[s][e-1]=g;a[t-1][0]=b;for(let s=1;s<e-1;s++)a[t-1][s]=f;return a[t-1][e-1]=y,null!==i&&(a[0][i]=null),null!==n&&(a[t-1][n]=null),a}static computeEntryPosition(e,t,i,n,a){return{top:null!==t?new m.F(n+t,a+e-1):null,bottom:null!==i?new m.F(n+i,a):null}}}class C extends n.W{constructor(){super(...arguments),this._collideTilemap=new a.s}getCollideTilemap(e){return this._collideTilemap=e,this}make(){return this.gameObjectBuilder.withComponent(s.N,(e=>{e.offset=-99})).withComponent(r.F,(e=>{e.chunkSize=15,e.filter.brightness=1.5,e.tileResolutionX=16,e.tileResolutionY=16,l.E.loadImageFromPath(h.Z).then((t=>{if(e.exists){e.imageSources=[new o.I(t,18,13)];for(const t of C._islandList)e.drawTileFromTwoDimensionalArray(k.make(t.width,t.height,t.topEntry,t.bottomEntry),t.x,t.y)}}))})).withComponent(d.n,(e=>{e.chunkSize=15,e.filter.brightness=1.5,e.tileResolutionX=16,e.tileResolutionY=16;l.E.loadImageFromPath(h.Z).then((t=>{if(e.exists){e.imageSources=[new o.I(t,18,13)];for(const t of C._islandList){const i=k.computeEntryPosition(t.height,t.topEntry,t.bottomEntry,t.x,t.y);i.top&&e.drawTile(i.top.x,i.top.y,0,6),i.bottom&&e.drawTile(i.bottom.x,i.bottom.y,0,42)}}}))})).getComponent(r.F,this._collideTilemap)}}C._islandList=[{width:16,height:6,topEntry:1,bottomEntry:2,x:-4,y:3},{width:15,height:8,topEntry:8,bottomEntry:3,x:-8,y:-9}]},5095:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>_,contentTitle:()=>k,default:()=>P,frontMatter:()=>y,metadata:()=>C,toc:()=>v});var n=i(7462),a=(i(7294),i(3905)),s=i(5853),r=i(708),l=i(6896),o=i(1269),d=i(6885),h=i(7888),m=i(7421),c=i(4532),p=i(7947),u=i(6327),w=i(2440),g=i(1900);class b extends r.A{run(){const e=this.instantiater;return this.sceneBuilder.withChild(e.buildGameObject("tilemap").withChild(e.buildPrefab("background",u.l,new c.P(0,0,-3)).make()).withChild(e.buildPrefab("islands",g.P,new c.P(0,0,-2)).make()).withChild(e.buildPrefab("detail",w.Y,new c.P(0,0,-1)).make())).withChild(e.buildPrefab("player",p.z).make()).withChild(e.buildGameObject("camera").withComponent(l.V,(e=>{e.viewSize=4})).withComponent(o.Y,(e=>{e.mouseMoveButton=0,e.minViewSize=4,e.maxViewSize=4})).withComponent(d.y,(e=>{e.renderWidth=50,e.renderHeight=50})))}}class f extends r.A{run(){const e=this.instantiater,t=new h.s;return this.sceneBuilder.withChild(e.buildGameObject("tilemap").withChild(e.buildPrefab("background",u.l,new c.P(0,0,-3)).make()).withChild(e.buildPrefab("islands",g.P,new c.P(0,0,-2)).make()).withChild(e.buildPrefab("detail",w.Y,new c.P(0,0,-1)).make())).withChild(e.buildPrefab("player",p.z).make().getGameObject(t)).withChild(e.buildGameObject("camera").withComponent(l.V,(e=>{e.viewSize=4})).withComponent(o.Y,(e=>{e.mouseMoveButton=0,e.minViewSize=4,e.maxViewSize=4})).withComponent(d.y,(e=>{e.renderWidth=50,e.renderHeight=50})).withComponent(m.K,(e=>{e.setTrackTarget(t.ref)})))}}const y={},k="Player",C={unversionedId:"tutorial-2dtopdown/player",id:"tutorial-2dtopdown/player",title:"Player",description:"We'll going to make a player gameObject that will be able to move around the map. and We'll animate the player.",source:"@site/docs/2-tutorial-2dtopdown/7-player.mdx",sourceDirName:"2-tutorial-2dtopdown",slug:"/tutorial-2dtopdown/player",permalink:"/the-world-engine.ts/build/docs/tutorial-2dtopdown/player",draft:!1,editUrl:"https://github.com/The-World-Space/the-world-engine.ts/tree/main/docs/docusaurus/docs/2-tutorial-2dtopdown/7-player.mdx",tags:[],version:"current",sidebarPosition:7,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Make Them Into Prefab",permalink:"/the-world-engine.ts/build/docs/tutorial-2dtopdown/make-them-into-prefab"},next:{title:"Collide Map Basic",permalink:"/the-world-engine.ts/build/docs/tutorial-2dtopdown/collide-map-basic"}},_={},v=[{value:"Create Player Prefab",id:"create-player-prefab",level:2},{value:"Build Player Prefab",id:"build-player-prefab",level:2},{value:"Camera Tracking",id:"camera-tracking",level:2},{value:"Disable Editor Grid Renderer",id:"disable-editor-grid-renderer",level:2}],O={toc:v};function P(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},O,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"player"},"Player"),(0,a.kt)("p",null,"We'll going to make a player gameObject that will be able to move around the map. and We'll animate the player."),(0,a.kt)("h2",{id:"create-player-prefab"},"Create Player Prefab"),(0,a.kt)("p",null,"You can create players with only engine-embedded components without any scripting."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/asset/prefab/PlayerPrefab.ts"',title:'"src/asset/prefab/PlayerPrefab.ts"'},'import {\n    CssSpriteAtlasRenderer,\n    GameObjectBuilder,\n    MovementAnimationController,\n    PlayerGridMovementController,\n    Prefab,\n    SpriteAtlasAnimator\n} from "the-world-engine";\n\nimport CharSpriteSheet from "../image/Char_Sprites/char_spritesheet.png";\n\nexport class PlayerPrefab extends Prefab {\n\n    public override make(): GameObjectBuilder {\n        return this.gameObjectBuilder\n            .withComponent(CssSpriteAtlasRenderer, c => {\n                c.asyncSetImageFromPath(CharSpriteSheet, 26, 23);\n                c.imageWidth = 1;\n                c.imageHeight = 1;\n                c.viewScale = 1;\n                c.filter.brightness = 1.2;\n            })\n            .withComponent(SpriteAtlasAnimator, c => {\n                c.addAnimation("down_walk", [27, 28, 29, 30, 31, 32]);\n                c.addAnimation("left_walk", [53, 54, 55, 56, 57, 58]);\n                c.addAnimation("right_walk", [79, 80, 81, 82, 83, 84]);\n                c.addAnimation("up_walk", [105, 106, 107, 108, 109, 110]);\n\n                c.addAnimation("down_idle", [34, 35, 36, 37, 38, 39]);\n                c.addAnimation("left_idle", [60, 61, 62, 63, 64, 65]);\n                c.addAnimation("right_idle", [86, 87, 88, 89, 90, 91]);\n                c.addAnimation("up_idle", [112, 113, 114, 115, 116, 117]);\n\n                c.frameDuration = 0.1;\n                c.playAnimation("down_idle");\n            })\n            .withComponent(PlayerGridMovementController, c => {\n                c.speed = 4;\n            })\n            .withComponent(MovementAnimationController)\n        ;\n    }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"CssSpriteAtlasRenderer")," is a component that renders a sprite atlas image."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"SpriteAtlasAnimator")," is a component that animates the sprite atlas image."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"PlayerGridMovementController")," is a component that moves the player on the grid."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"MovementAnimationController")," is a component that controls the animation of the player. This is a very simple ",(0,a.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Finite-state_machine"},"FSM"),".")),(0,a.kt)("p",null,"That's all you need to do and use it on the bootstrapper."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"If you don't like the specifications, you can implement these components yourself.")),(0,a.kt)("h2",{id:"build-player-prefab"},"Build Player Prefab"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/asset/Bootstrapper.ts"',title:'"src/asset/Bootstrapper.ts"'},'return this.sceneBuilder\n    .withChild(instantiater.buildGameObject("tilemap")\n        //...    \n    )\n\n    .withChild(instantiater.buildPrefab("player", PlayerPrefab)\n        .make())\n\n    .withChild(instantiater.buildGameObject("camera")\n')),(0,a.kt)(s.Z,{bootstrapper:b,allowScroll:!0,mdxType:"DocumentGame"}),(0,a.kt)("p",null,"Move the player to w, a, s, d."),(0,a.kt)("h2",{id:"camera-tracking"},"Camera Tracking"),(0,a.kt)("p",null,"We will use the ",(0,a.kt)("inlineCode",{parentName:"p"},"TrackCameraController"),", an internal component of the Engine, to allow the camera to follow the player."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/asset/Bootstrapper.ts"',title:'"src/asset/Bootstrapper.ts"'},'const player = new PrefabRef<GameObject>();\n\nreturn this.sceneBuilder\n    .withChild(instantiater.buildGameObject("tilemap")\n        //...    \n    )\n\n    .withChild(instantiater.buildPrefab("player", PlayerPrefab)\n        .make()\n        .getGameObject(player))\n\n    .withChild(instantiater.buildGameObject("camera")\n        //...\n        .withComponent(TrackCameraController, c => {\n            c.setTrackTarget(player.ref!);\n        }))\n;\n')),(0,a.kt)(s.Z,{bootstrapper:f,allowScroll:!0,mdxType:"DocumentGame"}),(0,a.kt)("p",null,"now camera follow player."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const player = new PrefabRef<GameObject>();\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"PrefabRef")," is used to inject dependencies when building a scene.\nIn this case, we want to inject the player GameObject into the ",(0,a.kt)("inlineCode",{parentName:"p"},"TrackCameraController")," component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},".getGameObject(player)\n")),(0,a.kt)("p",null,"so we get the player GameObject to the ",(0,a.kt)("inlineCode",{parentName:"p"},"PrefabRef")," object."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"c.setTrackTarget(player.ref!);\n")),(0,a.kt)("p",null,"Finally, we set the player GameObject to the ",(0,a.kt)("inlineCode",{parentName:"p"},"TrackCameraController")," component."),(0,a.kt)("h2",{id:"disable-editor-grid-renderer"},"Disable Editor Grid Renderer"),(0,a.kt)("p",null,"I think we can disable the grid renderer now that we have some frames."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/asset/Bootstrapper.ts"',title:'"src/asset/Bootstrapper.ts"'},".withComponent(EditorGridRenderer, c => {\n    c.enabled = false;\n    c.renderWidth = 50;\n    c.renderHeight = 50;\n})\n")),(0,a.kt)("p",null,"You can enable it whenever you need it for debugging."))}P.isMDXComponent=!0},6885:(e,t,i)=>{i.d(t,{y:()=>o});var n=i(4532),a=i(3674),s=i(7888),r=i(6896),l=i(1466);class o extends a.w{constructor(){super(...arguments),this.disallowMultipleComponent=!0,this.requiredComponents=[r.V],this.hd=null,this.rd=null,this.Ih=1,this.Th=1,this.nd=18,this.od=10,this.dd=.2,this.ad=0,this.ld=new n.P(NaN,NaN,NaN)}awake(){const e=new s.s;this.rd=this.engine.scene.addChildFromBuilder(this.engine.instantiater.buildGameObject("grid-renderer",void 0,void 0,new n.P(this.dd,this.dd,this.dd)).active(!1).withComponent(l.w,(e=>{const t=document.createElement("div");t.style.backgroundImage="                        repeating-linear-gradient(#999 0 1px, transparent 1px 100%),                        repeating-linear-gradient(90deg, #999 0 1px, transparent 1px 100%)",t.style.backgroundSize=this.Ih/this.dd/.1+"px "+this.Th/this.dd/.1+"px",e.elementWidth=this.nd/this.dd,e.elementHeight=this.od/this.dd,e.pointerEvents=!1,e.element=t,e.viewScale=.1})).getComponent(l.w,e)),this.hd=e.ref}onEnable(){this.rd.exists&&(this.rd.activeSelf=!0)}onDisable(){this.rd.exists&&(this.rd.activeSelf=!1)}update(){const e=this.transform.position,t=1/this.dd/.1,i=this.nd*t/2,n=this.od*t/2,a=this.Ih*t,s=this.Th*t,r=i%a,l=n%s;if(!e.equals(this.ld)){const i=this.rd.transform.position;i.copy(e),i.z+=this.ad,this.hd.element.style.backgroundPosition=-e.x*t+r+a/2-.5+"px "+(e.y*t+l+s/2-.5)+"px"}}onDestroy(){var e;null===(e=this.rd)||void 0===e||e.destroy()}fd(){const e=this.hd;e&&(e.element.style.backgroundSize=this.Ih/this.dd/.1+"px "+this.Th/this.dd/.1+"px")}get gridCellWidth(){return this.Ih}set gridCellWidth(e){this.Ih=e,this.fd()}get gridCellHeight(){return this.Th}set gridCellHeight(e){this.Th=e,this.fd()}get renderWidth(){return this.nd}set renderWidth(e){this.nd=e,this.hd&&(this.hd.elementWidth=this.nd/this.dd)}get renderHeight(){return this.od}set renderHeight(e){this.od=e,this.hd&&(this.hd.elementHeight=this.od/this.dd)}get lineWidth(){return.1*this.dd}set lineWidth(e){this.dd=e/.1;const t=this.hd;t&&(this.fd(),t.elementWidth=this.nd/this.dd,t.elementHeight=this.od/this.dd,t.gameObject.transform.localScale.setScalar(this.dd))}get zOffset(){return this.ad}set zOffset(e){this.ad=e}}},1466:(e,t,i)=>{i.d(t,{w:()=>s});var n=i(4627),a=i(6924);class s extends a.Y{constructor(){super(...arguments),this.tu=1,this.su=1,this.iu=!1,this.Ca=null}renderInitialize(){var e;null===(e=this.Ca)||void 0===e||e.call(this),this.htmlElement||(this.element=null)}updateCenterOffset(e){if(!this.css3DObject)return;let t,i;if(this.iu)if(this.css3DObject.element.parentElement){const e=this.css3DObject.element.style.display;this.css3DObject.element.style.display="",t=this.css3DObject.element.offsetWidth*this.viewScale,i=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=e}else{const e=this.css3DObject.element.style.display;this.css3DObject.element.style.display="";const n=this.css3DObject.element.style.transform;this.css3DObject.element.style.transform="translateX(1000000px)",document.body.appendChild(this.css3DObject.element),t=this.css3DObject.element.offsetWidth*this.viewScale,i=this.css3DObject.element.offsetHeight*this.viewScale,this.css3DObject.element.style.display=e,this.css3DObject.element.style.transform=n,document.body.removeChild(this.css3DObject.element)}else t=this.tu,i=this.su;this.css3DObject.position.set(t*this.centerOffset.x,i*this.centerOffset.y,0),e&&(n.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}updateViewScale(e){if(!this.css3DObject)return;const t=this.viewScale;this.iu?(this.css3DObject.scale.set(t,t,t),this.updateCenterOffset(!1)):(this.css3DObject.element.style.width=this.tu/this.viewScale+"px",this.css3DObject.element.style.height=this.su/this.viewScale+"px",this.css3DObject.scale.set(t,t,t)),e&&(n.w.updateRawObject3DWorldMatrixRecursively(this.css3DObject),this.transform.enqueueRenderAttachedObject3D(this.css3DObject))}get element(){return this.htmlElement}set element(e){const t=this.htmlElement=null!=e?e:document.createElement("div");this.readyToDraw?this.hu(t):this.Ca=()=>this.hu(t)}hu(e){this.iu?(e.style.width="auto",e.style.height="auto"):(e.style.width=this.tu/this.viewScale+"px",e.style.height=this.su/this.viewScale+"px");const t=this.initializeBaseComponents(!0);n.w.updateRawObject3DWorldMatrixRecursively(t),this.transform.enqueueRenderAttachedObject3D(t)}get elementWidth(){if(this.iu){if(this.htmlElement){const e=this.htmlElement.style.display;this.htmlElement.style.display="";const t=this.htmlElement.offsetWidth*this.viewScale;return this.htmlElement.style.display=e,t}return 0}return this.tu}set elementWidth(e){this.iu||(this.tu=e,this.htmlElement&&(this.htmlElement.style.width=e/this.viewScale+"px"),this.updateCenterOffset(!0))}get elementHeight(){if(this.iu){if(this.htmlElement){const e=this.htmlElement.style.display;this.htmlElement.style.display="";const t=this.htmlElement.offsetHeight*this.viewScale;return this.htmlElement.style.display=e,t}return 0}return this.su}set elementHeight(e){this.iu||(this.su=e,this.htmlElement&&(this.htmlElement.style.height=e/this.viewScale+"px"),this.updateCenterOffset(!0))}get autoSize(){return this.iu}set autoSize(e){this.iu=e,this.htmlElement&&(e?(this.htmlElement.style.width="auto",this.htmlElement.style.height="auto"):(this.htmlElement.style.width=this.tu/this.viewScale+"px",this.htmlElement.style.height=this.su/this.viewScale+"px"))}}},9484:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/Overworld_Tileset-1c44075b314e79caada3455aa25f5809.png"}}]);